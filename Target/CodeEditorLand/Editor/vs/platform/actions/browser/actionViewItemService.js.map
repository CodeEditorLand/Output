{
  "version": 3,
  "sources": ["../../../../../../../../../Dependency/Land/Dependency/Editor/Source/vs/platform/actions/browser/actionViewItemService.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IActionViewItemProvider } from '../../../base/browser/ui/actionbar/actionbar.js';\nimport { Emitter, Event } from '../../../base/common/event.js';\nimport { Disposable, IDisposable, toDisposable } from '../../../base/common/lifecycle.js';\nimport { InstantiationType, registerSingleton } from '../../instantiation/common/extensions.js';\nimport { createDecorator } from '../../instantiation/common/instantiation.js';\nimport { MenuId } from '../common/actions.js';\n\n\nexport const IActionViewItemService = createDecorator<IActionViewItemService>('IActionViewItemService');\n\nexport interface IActionViewItemService {\n\n\t_serviceBrand: undefined;\n\n\tonDidChange: Event<MenuId>;\n\n\tregister(menu: MenuId, submenu: MenuId, provider: IActionViewItemProvider, event?: Event<unknown>): IDisposable;\n\tregister(menu: MenuId, commandId: string, provider: IActionViewItemProvider, event?: Event<unknown>): IDisposable;\n\n\tlookUp(menu: MenuId, submenu: MenuId): IActionViewItemProvider | undefined;\n\tlookUp(menu: MenuId, commandId: string): IActionViewItemProvider | undefined;\n}\n\nexport class NullActionViewItemService implements IActionViewItemService {\n\t_serviceBrand: undefined;\n\n\tonDidChange: Event<MenuId> = Event.None;\n\n\tregister(menu: MenuId, commandId: string | MenuId, provider: IActionViewItemProvider, event?: Event<unknown>): IDisposable {\n\t\treturn Disposable.None;\n\t}\n\n\tlookUp(menu: MenuId, commandId: string | MenuId): IActionViewItemProvider | undefined {\n\t\treturn undefined;\n\t}\n}\n\nclass ActionViewItemService implements IActionViewItemService {\n\n\tdeclare _serviceBrand: undefined;\n\n\tprivate readonly _providers = new Map<string, IActionViewItemProvider>();\n\n\tprivate readonly _onDidChange = new Emitter<MenuId>();\n\treadonly onDidChange: Event<MenuId> = this._onDidChange.event;\n\n\tdispose(): void {\n\t\tthis._onDidChange.dispose();\n\t}\n\n\tregister(menu: MenuId, commandOrSubmenuId: string | MenuId, provider: IActionViewItemProvider, event?: Event<unknown>): IDisposable {\n\t\tconst id = this._makeKey(menu, commandOrSubmenuId);\n\t\tif (this._providers.has(id)) {\n\t\t\tthrow new Error(`A provider for the command ${commandOrSubmenuId} and menu ${menu} is already registered.`);\n\t\t}\n\t\tthis._providers.set(id, provider);\n\n\t\tconst listener = event?.(() => {\n\t\t\tthis._onDidChange.fire(menu);\n\t\t});\n\n\t\treturn toDisposable(() => {\n\t\t\tlistener?.dispose();\n\t\t\tthis._providers.delete(id);\n\t\t});\n\t}\n\n\tlookUp(menu: MenuId, commandOrMenuId: string | MenuId): IActionViewItemProvider | undefined {\n\t\treturn this._providers.get(this._makeKey(menu, commandOrMenuId));\n\t}\n\n\tprivate _makeKey(menu: MenuId, commandOrMenuId: string | MenuId) {\n\t\treturn `${menu.id}/${(commandOrMenuId instanceof MenuId ? commandOrMenuId.id : commandOrMenuId)}`;\n\t}\n}\n\nregisterSingleton(IActionViewItemService, ActionViewItemService, InstantiationType.Delayed);\n"],
  "mappings": ";;AAKA,SAAS,+BAA+B;AACxC,SAAS,SAAS,aAAa;AAC/B,SAAS,YAAY,aAAa,oBAAoB;AACtD,SAAS,mBAAmB,yBAAyB;AACrD,SAAS,uBAAuB;AAChC,SAAS,cAAc;AAGhB,MAAM,yBAAyB,gBAAwC,wBAAwB;AAe/F,MAAM,0BAA4D;AAAA,EA5BzE,OA4ByE;AAAA;AAAA;AAAA,EACxE;AAAA,EAEA,cAA6B,MAAM;AAAA,EAEnC,SAAS,MAAc,WAA4B,UAAmC,OAAqC;AAC1H,WAAO,WAAW;AAAA,EACnB;AAAA,EAEA,OAAO,MAAc,WAAiE;AACrF,WAAO;AAAA,EACR;AACD;AAEA,MAAM,sBAAwD;AAAA,EA1C9D,OA0C8D;AAAA;AAAA;AAAA,EAI5C,aAAa,oBAAI,IAAqC;AAAA,EAEtD,eAAe,IAAI,QAAgB;AAAA,EAC3C,cAA6B,KAAK,aAAa;AAAA,EAExD,UAAgB;AACf,SAAK,aAAa,QAAQ;AAAA,EAC3B;AAAA,EAEA,SAAS,MAAc,oBAAqC,UAAmC,OAAqC;AACnI,UAAM,KAAK,KAAK,SAAS,MAAM,kBAAkB;AACjD,QAAI,KAAK,WAAW,IAAI,EAAE,GAAG;AAC5B,YAAM,IAAI,MAAM,8BAA8B,kBAAkB,aAAa,IAAI,yBAAyB;AAAA,IAC3G;AACA,SAAK,WAAW,IAAI,IAAI,QAAQ;AAEhC,UAAM,WAAW,QAAQ,MAAM;AAC9B,WAAK,aAAa,KAAK,IAAI;AAAA,IAC5B,CAAC;AAED,WAAO,aAAa,MAAM;AACzB,gBAAU,QAAQ;AAClB,WAAK,WAAW,OAAO,EAAE;AAAA,IAC1B,CAAC;AAAA,EACF;AAAA,EAEA,OAAO,MAAc,iBAAuE;AAC3F,WAAO,KAAK,WAAW,IAAI,KAAK,SAAS,MAAM,eAAe,CAAC;AAAA,EAChE;AAAA,EAEQ,SAAS,MAAc,iBAAkC;AAChE,WAAO,GAAG,KAAK,EAAE,IAAK,2BAA2B,SAAS,gBAAgB,KAAK,eAAgB;AAAA,EAChG;AACD;AAEA,kBAAkB,wBAAwB,uBAAuB,kBAAkB,OAAO;",
  "names": []
}
