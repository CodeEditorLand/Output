import"../../../../base/common/jsonSchema.js";import{KeyChord as A,KeyCode as s,KeyMod as E}from"../../../../base/common/keyCodes.js";import{Schemas as K,matchesScheme as X}from"../../../../base/common/network.js";import{extname as ae}from"../../../../base/common/resources.js";import{isNumber as pe,isObject as me,isString as Q,isUndefined as Z}from"../../../../base/common/types.js";import{URI as _}from"../../../../base/common/uri.js";import{isDiffEditor as ge}from"../../../../editor/browser/editorBrowser.js";import{EditorContextKeys as V}from"../../../../editor/common/editorContextKeys.js";import{localize as k,localize2 as O}from"../../../../nls.js";import{Categories as w}from"../../../../platform/action/common/actionCommonCategories.js";import{Action2 as b,registerAction2 as D}from"../../../../platform/actions/common/actions.js";import{CommandsRegistry as h,ICommandService as P}from"../../../../platform/commands/common/commands.js";import{IConfigurationService as T}from"../../../../platform/configuration/common/configuration.js";import{ContextKeyExpr as U}from"../../../../platform/contextkey/common/contextkey.js";import{EditorResolution as Ee}from"../../../../platform/editor/common/editor.js";import{IInstantiationService as le}from"../../../../platform/instantiation/common/instantiation.js";import{KeybindingWeight as v,KeybindingsRegistry as y}from"../../../../platform/keybinding/common/keybindingsRegistry.js";import{IListService as C}from"../../../../platform/list/browser/listService.js";import{IOpenerService as fe}from"../../../../platform/opener/common/opener.js";import{IQuickInputService as ve}from"../../../../platform/quickinput/common/quickInput.js";import{ITelemetryService as he}from"../../../../platform/telemetry/common/telemetry.js";import{ActiveGroupEditorsByMostRecentlyUsedQuickAccess as Ce}from"./editorQuickAccess.js";import{SideBySideEditor as N}from"./sideBySideEditor.js";import{TextDiffEditor as H}from"./textDiffEditor.js";import{ActiveEditorCanSplitInGroupContext as B,ActiveEditorGroupEmptyContext as Ie,ActiveEditorGroupLockedContext as $,ActiveEditorStickyContext as ee,MultipleEditorGroupsContext as ye,SideBySideEditorActiveContext as R,TextCompareEditorActiveContext as Y}from"../../../common/contextkeys.js";import{CloseDirection as Se,EditorInputCapabilities as _e,EditorsOrder as j,isEditorInputWithOptionsAndGroup as Oe}from"../../../common/editor.js";import{DiffEditorInput as we}from"../../../common/editor/diffEditorInput.js";import"../../../common/editor/editorInput.js";import{SideBySideEditorInput as z}from"../../../common/editor/sideBySideEditorInput.js";import{columnToEditorGroup as J}from"../../../services/editor/common/editorGroupColumn.js";import{GroupDirection as S,GroupLocation as W,GroupsOrder as q,IEditorGroupsService as g,preferredSideBySideGroupDirection as oe}from"../../../services/editor/common/editorGroupsService.js";import{IEditorResolverService as be}from"../../../services/editor/common/editorResolverService.js";import{IEditorService as m,SIDE_GROUP as De}from"../../../services/editor/common/editorService.js";import{IPathService as Ge}from"../../../services/path/common/pathService.js";import{IUntitledTextEditorService as Ae}from"../../../services/untitled/common/untitledTextEditorService.js";import{DIFF_FOCUS_OTHER_SIDE as ke,DIFF_FOCUS_PRIMARY_SIDE as Te,DIFF_FOCUS_SECONDARY_SIDE as Re,DIFF_OPEN_SIDE as xe,registerDiffEditorCommands as Pe}from"./diffEditorCommands.js";import{resolveCommandsContext as I}from"./editorCommandsContext.js";const Ne="workbench.action.closeUnmodifiedEditors",Me="workbench.action.closeEditorsInGroup",Ue="workbench.action.closeEditorsAndGroup",We="workbench.action.closeEditorsToTheRight",te="workbench.action.closeActiveEditor",Le="workbench.action.closeActivePinnedEditor",Fe="workbench.action.closeGroup",Ke="workbench.action.closeOtherEditors",Ve="moveActiveEditor",He="copyActiveEditor",Be="layoutEditorGroups",Ye="workbench.action.keepEditor",je="workbench.action.toggleKeepEditors",ze="workbench.action.toggleEditorGroupLock",Je="workbench.action.lockEditorGroup",re="workbench.action.unlockEditorGroup",qe="workbench.action.showEditorsInGroup",Xe="workbench.action.reopenWithEditor",Qe="workbench.action.pinEditor",ie="workbench.action.unpinEditor",Ze="workbench.action.splitEditor",$e="workbench.action.splitEditorUp",eo="workbench.action.splitEditorDown",oo="workbench.action.splitEditorLeft",to="workbench.action.splitEditorRight",ro="workbench.action.toggleMaximizeEditorGroup",io="workbench.action.splitEditorInGroup",no="workbench.action.toggleSplitEditorInGroup",co="workbench.action.joinEditorInGroup",so="workbench.action.toggleSplitEditorInGroupLayout",uo="workbench.action.focusFirstSideEditor",ao="workbench.action.focusSecondSideEditor",po="workbench.action.focusOtherSideEditor",mo="workbench.action.focusLeftGroupWithoutWrap",go="workbench.action.focusRightGroupWithoutWrap",Eo="workbench.action.focusAboveGroupWithoutWrap",lo="workbench.action.focusBelowGroupWithoutWrap",ne="workbench.action.openEditorAtIndex",At="workbench.action.moveEditorToNewWindow",kt="workbench.action.copyEditorToNewWindow",Tt="workbench.action.moveEditorGroupToNewWindow",Rt="workbench.action.copyEditorGroupToNewWindow",xt="workbench.action.newEmptyEditorWindow",de="_workbench.open",ce="_workbench.diff",fo="_workbench.openWith",Pt=[Ze,te,ie,re,ro],se=function(c){return!(!me(c)||!Q(c.to)||!Z(c.by)&&!Q(c.by)||!Z(c.value)&&!pe(c.value))};function vo(){const c={type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right"]},by:{type:"string",enum:["tab","group"]},value:{type:"number"}}};y.registerCommandAndKeybindingRule({id:Ve,weight:v.WorkbenchContrib,when:V.editorTextFocus,primary:0,handler:(r,i)=>o(!0,i,r),metadata:{description:k("editorCommand.activeEditorMove.description","Move the active editor by tabs or groups"),args:[{name:k("editorCommand.activeEditorMove.arg.name","Active editor move argument"),description:k("editorCommand.activeEditorMove.arg.description",`Argument Properties:
	* 'to': String value providing where to move.
	* 'by': String value providing the unit for move (by tab or by group).
	* 'value': Number value providing how many positions or an absolute position to move.`),constraint:se,schema:c}]}}),y.registerCommandAndKeybindingRule({id:He,weight:v.WorkbenchContrib,when:V.editorTextFocus,primary:0,handler:(r,i)=>o(!1,i,r),metadata:{description:k("editorCommand.activeEditorCopy.description","Copy the active editor by groups"),args:[{name:k("editorCommand.activeEditorCopy.arg.name","Active editor copy argument"),description:k("editorCommand.activeEditorCopy.arg.description",`Argument Properties:
	* 'to': String value providing where to copy.
	* 'value': Number value providing how many positions or an absolute position to copy.`),constraint:se,schema:c}]}});function o(r,i=Object.create(null),n){i.to=i.to||"right",i.by=i.by||"tab",i.value=typeof i.value=="number"?i.value:1;const d=n.get(m).activeEditorPane;if(d)switch(i.by){case"tab":if(r)return e(i,d);break;case"group":return t(r,i,d,n)}}function e(r,i){const n=i.group;let d=n.getIndexOfEditor(i.input);switch(r.to){case"first":d=0;break;case"last":d=n.count-1;break;case"left":d=d-(r.value??1);break;case"right":d=d+(r.value??1);break;case"center":d=Math.round(n.count/2)-1;break;case"position":d=(r.value??1)-1;break}d=d<0?0:d>=n.count?n.count-1:d,n.moveEditor(i.input,n,{index:d})}function t(r,i,n,d){const u=d.get(g),l=d.get(T),p=n.group;let a;switch(i.to){case"left":a=u.findGroup({direction:S.LEFT},p),a||(a=u.addGroup(p,S.LEFT));break;case"right":a=u.findGroup({direction:S.RIGHT},p),a||(a=u.addGroup(p,S.RIGHT));break;case"up":a=u.findGroup({direction:S.UP},p),a||(a=u.addGroup(p,S.UP));break;case"down":a=u.findGroup({direction:S.DOWN},p),a||(a=u.addGroup(p,S.DOWN));break;case"first":a=u.findGroup({location:W.FIRST},p);break;case"last":a=u.findGroup({location:W.LAST},p);break;case"previous":a=u.findGroup({location:W.PREVIOUS},p);break;case"next":a=u.findGroup({location:W.NEXT},p),a||(a=u.addGroup(p,oe(l)));break;case"center":a=u.getGroups(q.GRID_APPEARANCE)[u.count/2-1];break;case"position":a=u.getGroups(q.GRID_APPEARANCE)[(i.value??1)-1];break}a&&(r?p.moveEditor(n.input,a):p.id!==a.id&&p.copyEditor(n.input,a),a.focus())}}function ho(){function c(o,e){if(!e||typeof e!="object")return;o.get(g).applyLayout(e)}h.registerCommand(Be,(o,e)=>{c(o,e)}),h.registerCommand({id:"vscode.setEditorLayout",handler:(o,e)=>c(o,e),metadata:{description:`Set the editor layout. Editor layout is represented as a tree of groups in which the first group is the root group of the layout.
					The orientation of the first group is 0 (horizontal) by default unless specified otherwise. The other orientations are 1 (vertical).
					The orientation of subsequent groups is the opposite of the orientation of the group that contains it.
					Here are some examples: A layout representing 1 row and 2 columns: { orientation: 0, groups: [{}, {}] }.
					A layout representing 3 rows and 1 column: { orientation: 1, groups: [{}, {}, {}] }.
					A layout representing 3 rows and 1 column in which the second row has 2 columns: { orientation: 1, groups: [{}, { groups: [{}, {}] }, {}] }
					`,args:[{name:"args",schema:{type:"object",required:["groups"],properties:{orientation:{type:"number",default:0,description:"The orientation of the root group in the layout. 0 for horizontal, 1 for vertical.",enum:[0,1],enumDescriptions:[k("editorGroupLayout.horizontal","Horizontal"),k("editorGroupLayout.vertical","Vertical")]},groups:{$ref:"#/definitions/editorGroupsSchema",default:[{},{}]}}}}]}}),h.registerCommand({id:"vscode.getEditorLayout",handler:o=>o.get(g).getLayout(),metadata:{description:"Get Editor Layout",args:[],returns:"An editor layout object, in the same format as vscode.setEditorLayout"}})}function Co(){function c(o,e,t){return o?[{...o.editorOptions,...e??Object.create(null)},o.sideBySide?De:t]:[e,t]}h.registerCommand({id:"vscode.open",handler:(o,e)=>{o.get(P).executeCommand(de,e)},metadata:{description:"Opens the provided resource in the editor.",args:[{name:"Uri"}]}}),h.registerCommand(de,async function(o,e,t,r,i){const n=o.get(m),d=o.get(g),u=o.get(fe),l=o.get(Ge),p=o.get(T),a=o.get(Ae),f=typeof e=="string"?e:_.from(e,!0),[G,x]=t??[];if(x||typeof G=="number"||X(f,K.untitled)){const[M,ue]=c(i,x,G),L=_.isUri(f)?f:_.parse(f);let F;a.isUntitledWithAssociatedResource(L)?F={resource:L.with({scheme:l.defaultUriScheme}),forceUntitled:!0,options:M,label:r}:F={resource:L,options:M,label:r},await n.openEditor(F,J(d,p,ue))}else{if(X(f,K.command))return;await u.open(f,{openToSide:i?.sideBySide,editorOptions:i?.editorOptions})}}),h.registerCommand({id:"vscode.diff",handler:(o,e,t,r)=>{o.get(P).executeCommand(ce,e,t,r)},metadata:{description:"Opens the provided resources in the diff editor to compare their contents.",args:[{name:"left",description:"Left-hand side resource of the diff editor"},{name:"right",description:"Right-hand side resource of the diff editor"},{name:"title",description:"Human readable title for the diff editor"}]}}),h.registerCommand(ce,async function(o,e,t,r,i,n){const d=o.get(m),u=o.get(g),l=o.get(T),[p,a]=i??[],[f,G]=c(n,a,p);let x,M;typeof r=="string"?x=r:r&&(x=r.label,M=r.description),await d.openEditor({original:{resource:_.from(e,!0)},modified:{resource:_.from(t,!0)},label:x,description:M,options:f},J(u,l,G))}),h.registerCommand(fo,async(o,e,t,r)=>{const i=o.get(m),n=o.get(g),d=o.get(T),[u,l]=r??[];await i.openEditor({resource:_.from(e,!0),options:{...l,pinned:!0,override:t}},J(n,d,u))}),h.registerCommand({id:"vscode.changes",handler:(o,e,t)=>{o.get(P).executeCommand("_workbench.changes",e,t)},metadata:{description:"Opens a list of resources in the changes editor to compare their contents.",args:[{name:"title",description:"Human readable title for the diff editor"},{name:"resources",description:"List of resources to open in the changes editor"}]}}),h.registerCommand("_workbench.changes",async(o,e,t)=>{const r=o.get(m),i=[];for(const[n,d,u]of t)i.push({resource:_.revive(n),original:{resource:_.revive(d)},modified:{resource:_.revive(u)}});await r.openEditor({resources:i,label:e})}),h.registerCommand("_workbench.openMultiDiffEditor",async(o,e)=>{await o.get(m).openEditor({multiDiffSource:e.multiDiffSourceUri?_.revive(e.multiDiffSourceUri):void 0,resources:e.resources?.map(r=>({original:{resource:_.revive(r.originalUri)},modified:{resource:_.revive(r.modifiedUri)}})),label:e.title})})}function Io(){const c=(e,t)=>{const r=e.get(m),i=r.activeEditorPane;if(i){const n=i.group.getEditorByIndex(t);n&&r.openEditor(n)}};h.registerCommand({id:ne,handler:c});for(let e=0;e<9;e++){const t=e,r=e+1;y.registerCommandAndKeybindingRule({id:ne+r,weight:v.WorkbenchContrib,when:void 0,primary:E.Alt|o(r),mac:{primary:E.WinCtrl|o(r)},handler:i=>c(i,t)})}function o(e){switch(e){case 0:return s.Digit0;case 1:return s.Digit1;case 2:return s.Digit2;case 3:return s.Digit3;case 4:return s.Digit4;case 5:return s.Digit5;case 6:return s.Digit6;case 7:return s.Digit7;case 8:return s.Digit8;case 9:return s.Digit9}throw new Error("invalid index")}}function yo(){for(let e=1;e<8;e++)y.registerCommandAndKeybindingRule({id:c(e),weight:v.WorkbenchContrib,when:void 0,primary:E.CtrlCmd|o(e),handler:t=>{const r=t.get(g),i=t.get(T);if(e>r.count)return;const n=r.getGroups(q.GRID_APPEARANCE);if(n[e])return n[e].focus();const d=oe(i),u=r.findGroup({location:W.LAST});if(!u)return;r.addGroup(u,d).focus()}});function c(e){switch(e){case 1:return"workbench.action.focusSecondEditorGroup";case 2:return"workbench.action.focusThirdEditorGroup";case 3:return"workbench.action.focusFourthEditorGroup";case 4:return"workbench.action.focusFifthEditorGroup";case 5:return"workbench.action.focusSixthEditorGroup";case 6:return"workbench.action.focusSeventhEditorGroup";case 7:return"workbench.action.focusEighthEditorGroup"}throw new Error("Invalid index")}function o(e){switch(e){case 1:return s.Digit2;case 2:return s.Digit3;case 3:return s.Digit4;case 4:return s.Digit5;case 5:return s.Digit6;case 6:return s.Digit7;case 7:return s.Digit8}throw new Error("Invalid index")}}function So(c,o,e){if(!e.groupedEditors.length)return;const{group:t,editors:r}=e.groupedEditors[0],i=e.preserveFocus,n=c.addGroup(t,o);for(const d of r)d&&!d.hasCapability(_e.Singleton)&&t.copyEditor(d,n,{preserveFocus:i});n.focus()}function _o(){[{id:$e,direction:S.UP},{id:eo,direction:S.DOWN},{id:oo,direction:S.LEFT},{id:to,direction:S.RIGHT}].forEach(({id:c,direction:o})=>{h.registerCommand(c,function(e,...t){const r=I(t,e.get(m),e.get(g),e.get(C));So(e.get(g),o,r)})})}function Oo(){function c(o,e,...t){const r=o.get(g),i=o.get(m);let n;if(e||t.length?n=!1:n=r.partOptions.preventPinnedEditorClose==="keyboard"||r.partOptions.preventPinnedEditorClose==="keyboardAndMouse",n){const l=r.activeGroup,p=l.activeEditor;if(p&&l.isSticky(p)){const a=l.getEditors(j.MOST_RECENTLY_ACTIVE,{excludeSticky:!0})[0];if(a)return l.openEditor(a);const f=i.getEditors(j.MOST_RECENTLY_ACTIVE,{excludeSticky:!0})[0];if(f)return Promise.resolve(r.getGroup(f.groupId)?.openEditor(f.editor))}}const d=I(t,o.get(m),o.get(g),o.get(C)),u=d.preserveFocus;return Promise.all(d.groupedEditors.map(async({group:l,editors:p})=>{const a=p.filter(f=>!n||!l.isSticky(f));await l.closeEditors(a,{preserveFocus:u})}))}y.registerCommandAndKeybindingRule({id:te,weight:v.WorkbenchContrib,when:void 0,primary:E.CtrlCmd|s.KeyW,win:{primary:E.CtrlCmd|s.F4,secondary:[E.CtrlCmd|s.KeyW]},handler:(o,...e)=>c(o,!1,...e)}),h.registerCommand(Le,(o,...e)=>c(o,!0,...e)),y.registerCommandAndKeybindingRule({id:Me,weight:v.WorkbenchContrib,when:void 0,primary:A(E.CtrlCmd|s.KeyK,s.KeyW),handler:(o,...e)=>{const t=I(e,o.get(m),o.get(g),o.get(C));return Promise.all(t.groupedEditors.map(async({group:r})=>{await r.closeAllEditors({excludeSticky:!0})}))}}),y.registerCommandAndKeybindingRule({id:Fe,weight:v.WorkbenchContrib,when:U.and(Ie,ye),primary:E.CtrlCmd|s.KeyW,win:{primary:E.CtrlCmd|s.F4,secondary:[E.CtrlCmd|s.KeyW]},handler:(o,...e)=>{const t=o.get(g),r=I(e,o.get(m),t,o.get(C));r.groupedEditors.length&&t.removeGroup(r.groupedEditors[0].group)}}),y.registerCommandAndKeybindingRule({id:Ne,weight:v.WorkbenchContrib,when:void 0,primary:A(E.CtrlCmd|s.KeyK,s.KeyU),handler:(o,...e)=>{const t=I(e,o.get(m),o.get(g),o.get(C));return Promise.all(t.groupedEditors.map(async({group:r})=>{await r.closeEditors({savedOnly:!0,excludeSticky:!0},{preserveFocus:t.preserveFocus})}))}}),y.registerCommandAndKeybindingRule({id:Ke,weight:v.WorkbenchContrib,when:void 0,primary:void 0,mac:{primary:E.CtrlCmd|E.Alt|s.KeyT},handler:(o,...e)=>{const t=I(e,o.get(m),o.get(g),o.get(C));return Promise.all(t.groupedEditors.map(async({group:r,editors:i})=>{const n=r.getEditors(j.SEQUENTIAL,{excludeSticky:!0}).filter(d=>!i.includes(d));for(const d of i)d&&r.pinEditor(d);await r.closeEditors(n,{preserveFocus:t.preserveFocus})}))}}),y.registerCommandAndKeybindingRule({id:We,weight:v.WorkbenchContrib,when:void 0,primary:void 0,handler:async(o,...e)=>{const t=I(e,o.get(m),o.get(g),o.get(C));if(t.groupedEditors.length){const{group:r,editors:i}=t.groupedEditors[0];r.activeEditor&&r.pinEditor(r.activeEditor),await r.closeEditors({direction:Se.RIGHT,except:i[0],excludeSticky:!0},{preserveFocus:t.preserveFocus})}}}),y.registerCommandAndKeybindingRule({id:Xe,weight:v.WorkbenchContrib,when:void 0,primary:void 0,handler:async(o,...e)=>{const t=o.get(m),r=o.get(be),i=o.get(he),n=I(e,t,o.get(g),o.get(C)),d=new Map;for(const{group:u,editors:l}of n.groupedEditors)for(const p of l){const a=p.toUntyped();if(!a)return;a.options={...t.activeEditorPane?.options,override:Ee.PICK};const f=await r.resolveEditor(a,u);if(!Oe(f))return;let G=d.get(u);G||(G=[],d.set(u,G)),G.push({editor:p,replacement:f.editor,forceReplaceDirty:p.resource?.scheme===K.untitled,options:f.options}),i.publicLog2("workbenchEditorReopen",{scheme:p.resource?.scheme??"",ext:p.resource?ae(p.resource):"",from:p.editorId??"",to:f.editor.editorId??""})}for(const[u,l]of d)await u.replaceEditors(l),await u.openEditor(l[0].replacement)}}),h.registerCommand(Ue,async(o,...e)=>{const t=o.get(g),r=I(e,o.get(m),t,o.get(C));if(r.groupedEditors.length){const{group:i}=r.groupedEditors[0];await i.closeAllEditors(),i.count===0&&t.getGroup(i.id)&&t.removeGroup(i)}})}function wo(){const c=[{id:mo,direction:S.LEFT},{id:go,direction:S.RIGHT},{id:Eo,direction:S.UP},{id:lo,direction:S.DOWN}];for(const o of c)h.registerCommand(o.id,async e=>{const t=e.get(g);t.findGroup({direction:o.direction},t.activeGroup,!1)?.focus()})}function bo(){async function c(e,t){const r=e.get(le);if(!t.groupedEditors.length)return;const{group:i,editors:n}=t.groupedEditors[0],d=n[0];d&&await i.replaceEditors([{editor:d,replacement:r.createInstance(z,void 0,void 0,d,d),forceReplaceDirty:!0}])}D(class extends b{constructor(){super({id:io,title:O("splitEditorInGroup","Split Editor in Group"),category:w.View,precondition:B,f1:!0,keybinding:{weight:v.WorkbenchContrib,when:B,primary:A(E.CtrlCmd|s.KeyK,E.CtrlCmd|E.Shift|s.Backslash)}})}run(e,...t){return c(e,I(t,e.get(m),e.get(g),e.get(C)))}});async function o(e){if(!e.groupedEditors.length)return;const{group:t,editors:r}=e.groupedEditors[0],i=r[0];if(!i||!(i instanceof z))return;let n;const d=t.activeEditorPane;if(d instanceof N&&t.activeEditor===i){for(const u of[d.getPrimaryEditorPane(),d.getSecondaryEditorPane()])if(u?.hasFocus()){n={viewState:u.getViewState()};break}}await t.replaceEditors([{editor:i,replacement:i.primary,options:n}])}D(class extends b{constructor(){super({id:co,title:O("joinEditorInGroup","Join Editor in Group"),category:w.View,precondition:R,f1:!0,keybinding:{weight:v.WorkbenchContrib,when:R,primary:A(E.CtrlCmd|s.KeyK,E.CtrlCmd|E.Shift|s.Backslash)}})}run(e,...t){return o(I(t,e.get(m),e.get(g),e.get(C)))}}),D(class extends b{constructor(){super({id:no,title:O("toggleJoinEditorInGroup","Toggle Split Editor in Group"),category:w.View,precondition:U.or(B,R),f1:!0})}async run(e,...t){const r=I(t,e.get(m),e.get(g),e.get(C));if(!r.groupedEditors.length)return;const{editors:i}=r.groupedEditors[0];i[0]instanceof z?await o(r):i[0]&&await c(e,r)}}),D(class extends b{constructor(){super({id:so,title:O("toggleSplitEditorInGroupLayout","Toggle Layout of Split Editor in Group"),category:w.View,precondition:R,f1:!0})}async run(e){const t=e.get(T),r=t.getValue(N.SIDE_BY_SIDE_LAYOUT_SETTING);let i;return r!=="horizontal"?i="horizontal":i="vertical",t.updateValue(N.SIDE_BY_SIDE_LAYOUT_SETTING,i)}})}function Do(){D(class extends b{constructor(){super({id:uo,title:O("focusLeftSideEditor","Focus First Side in Active Editor"),category:w.View,precondition:U.or(R,Y),f1:!0})}async run(c){const o=c.get(m),e=c.get(P),t=o.activeEditorPane;t instanceof N?t.getSecondaryEditorPane()?.focus():t instanceof H&&await e.executeCommand(Re)}}),D(class extends b{constructor(){super({id:ao,title:O("focusRightSideEditor","Focus Second Side in Active Editor"),category:w.View,precondition:U.or(R,Y),f1:!0})}async run(c){const o=c.get(m),e=c.get(P),t=o.activeEditorPane;t instanceof N?t.getPrimaryEditorPane()?.focus():t instanceof H&&await e.executeCommand(Te)}}),D(class extends b{constructor(){super({id:po,title:O("focusOtherSideEditor","Focus Other Side in Active Editor"),category:w.View,precondition:U.or(R,Y),f1:!0})}async run(c){const o=c.get(m),e=c.get(P),t=o.activeEditorPane;t instanceof N?t.getPrimaryEditorPane()?.hasFocus()?t.getSecondaryEditorPane()?.focus():t.getPrimaryEditorPane()?.focus():t instanceof H&&await e.executeCommand(ke)}})}function Go(){y.registerCommandAndKeybindingRule({id:Ye,weight:v.WorkbenchContrib,when:void 0,primary:A(E.CtrlCmd|s.KeyK,s.Enter),handler:async(o,...e)=>{const t=I(e,o.get(m),o.get(g),o.get(C));for(const{group:r,editors:i}of t.groupedEditors)for(const n of i)r.pinEditor(n)}}),h.registerCommand({id:je,handler:o=>{const e=o.get(T),r=e.getValue("workbench.editor.enablePreview")!==!0;e.updateValue("workbench.editor.enablePreview",r)}});function c(o,e,...t){const i=I(t,o.get(m),o.get(g),o.get(C)).groupedEditors[0]?.group;i?.lock(e??!i.isLocked)}D(class extends b{constructor(){super({id:ze,title:O("toggleEditorGroupLock","Toggle Editor Group Lock"),category:w.View,f1:!0})}async run(o,...e){c(o,void 0,...e)}}),D(class extends b{constructor(){super({id:Je,title:O("lockEditorGroup","Lock Editor Group"),category:w.View,precondition:$.toNegated(),f1:!0})}async run(o,...e){c(o,!0,...e)}}),D(class extends b{constructor(){super({id:re,title:O("unlockEditorGroup","Unlock Editor Group"),precondition:$,category:w.View,f1:!0})}async run(o,...e){c(o,!1,...e)}}),y.registerCommandAndKeybindingRule({id:Qe,weight:v.WorkbenchContrib,when:ee.toNegated(),primary:A(E.CtrlCmd|s.KeyK,E.Shift|s.Enter),handler:async(o,...e)=>{const t=I(e,o.get(m),o.get(g),o.get(C));for(const{group:r,editors:i}of t.groupedEditors)for(const n of i)r.stickEditor(n)}}),y.registerCommandAndKeybindingRule({id:xe,weight:v.WorkbenchContrib,when:V.inDiffEditor,primary:A(E.CtrlCmd|s.KeyK,E.Shift|s.KeyO),handler:async o=>{const e=o.get(m),t=o.get(g),r=e.activeEditor,i=e.activeTextEditorControl;if(!ge(i)||!(r instanceof we))return;let n;return i.getOriginalEditor().hasTextFocus()?n=r.original:n=r.modified,t.activeGroup.openEditor(n)}}),y.registerCommandAndKeybindingRule({id:ie,weight:v.WorkbenchContrib,when:ee,primary:A(E.CtrlCmd|s.KeyK,E.Shift|s.Enter),handler:async(o,...e)=>{const t=I(e,o.get(m),o.get(g),o.get(C));for(const{group:r,editors:i}of t.groupedEditors)for(const n of i)r.unstickEditor(n)}}),y.registerCommandAndKeybindingRule({id:qe,weight:v.WorkbenchContrib,when:void 0,primary:void 0,handler:(o,...e)=>{const t=o.get(g),r=o.get(ve),n=I(e,o.get(m),t,o.get(C)).groupedEditors[0]?.group;return n&&t.activateGroup(n),r.quickAccess.show(Ce.PREFIX)}})}function Nt(){vo(),ho(),Pe(),Co(),Io(),Oo(),Go(),bo(),Do(),yo(),_o(),wo()}export{ce as API_OPEN_DIFF_EDITOR_COMMAND_ID,de as API_OPEN_EDITOR_COMMAND_ID,fo as API_OPEN_WITH_EDITOR_COMMAND_ID,Ue as CLOSE_EDITORS_AND_GROUP_COMMAND_ID,Me as CLOSE_EDITORS_IN_GROUP_COMMAND_ID,We as CLOSE_EDITORS_TO_THE_RIGHT_COMMAND_ID,te as CLOSE_EDITOR_COMMAND_ID,Fe as CLOSE_EDITOR_GROUP_COMMAND_ID,Ke as CLOSE_OTHER_EDITORS_IN_GROUP_COMMAND_ID,Le as CLOSE_PINNED_EDITOR_COMMAND_ID,Ne as CLOSE_SAVED_EDITORS_COMMAND_ID,He as COPY_ACTIVE_EDITOR_COMMAND_ID,Rt as COPY_EDITOR_GROUP_INTO_NEW_WINDOW_COMMAND_ID,kt as COPY_EDITOR_INTO_NEW_WINDOW_COMMAND_ID,Pt as EDITOR_CORE_NAVIGATION_COMMANDS,Eo as FOCUS_ABOVE_GROUP_WITHOUT_WRAP_COMMAND_ID,lo as FOCUS_BELOW_GROUP_WITHOUT_WRAP_COMMAND_ID,uo as FOCUS_FIRST_SIDE_EDITOR,mo as FOCUS_LEFT_GROUP_WITHOUT_WRAP_COMMAND_ID,po as FOCUS_OTHER_SIDE_EDITOR,go as FOCUS_RIGHT_GROUP_WITHOUT_WRAP_COMMAND_ID,ao as FOCUS_SECOND_SIDE_EDITOR,co as JOIN_EDITOR_IN_GROUP,Ye as KEEP_EDITOR_COMMAND_ID,Be as LAYOUT_EDITOR_GROUPS_COMMAND_ID,Je as LOCK_GROUP_COMMAND_ID,Ve as MOVE_ACTIVE_EDITOR_COMMAND_ID,Tt as MOVE_EDITOR_GROUP_INTO_NEW_WINDOW_COMMAND_ID,At as MOVE_EDITOR_INTO_NEW_WINDOW_COMMAND_ID,xt as NEW_EMPTY_EDITOR_WINDOW_COMMAND_ID,ne as OPEN_EDITOR_AT_INDEX_COMMAND_ID,Qe as PIN_EDITOR_COMMAND_ID,Xe as REOPEN_WITH_COMMAND_ID,qe as SHOW_EDITORS_IN_GROUP,Ze as SPLIT_EDITOR,eo as SPLIT_EDITOR_DOWN,io as SPLIT_EDITOR_IN_GROUP,oo as SPLIT_EDITOR_LEFT,to as SPLIT_EDITOR_RIGHT,$e as SPLIT_EDITOR_UP,je as TOGGLE_KEEP_EDITORS_COMMAND_ID,ze as TOGGLE_LOCK_GROUP_COMMAND_ID,ro as TOGGLE_MAXIMIZE_EDITOR_GROUP,no as TOGGLE_SPLIT_EDITOR_IN_GROUP,so as TOGGLE_SPLIT_EDITOR_IN_GROUP_LAYOUT,re as UNLOCK_GROUP_COMMAND_ID,ie as UNPIN_EDITOR_COMMAND_ID,Nt as setup,So as splitEditor};
