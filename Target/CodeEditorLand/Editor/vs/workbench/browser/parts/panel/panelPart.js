var k=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var C=(l,a,e,o)=>{for(var i=o>1?void 0:o?N(a,e):a,n=l.length-1,r;n>=0;n--)(r=l[n])&&(i=(o?r(a,e,i):r(i))||i);return o&&i&&k(a,e,i),i},t=(l,a)=>(e,o)=>a(e,o,l);import"./media/panelpart.css";import{localize as c}from"../../../../nls.js";import{Separator as x,SubmenuAction as S,toAction as h}from"../../../../base/common/actions.js";import{ActionsOrientation as D}from"../../../../base/browser/ui/actionbar/actionbar.js";import{ActivePanelContext as _,PanelFocusContext as M}from"../../../common/contextkeys.js";import{IWorkbenchLayoutService as R,Parts as I,Position as d}from"../../../services/layout/browser/layoutService.js";import{IStorageService as V}from"../../../../platform/storage/common/storage.js";import{IContextMenuService as F}from"../../../../platform/contextview/browser/contextView.js";import{IKeybindingService as H}from"../../../../platform/keybinding/common/keybinding.js";import{IInstantiationService as K}from"../../../../platform/instantiation/common/instantiation.js";import{TogglePanelAction as b}from"./panelActions.js";import{IThemeService as W}from"../../../../platform/theme/common/themeService.js";import{PANEL_BACKGROUND as g,PANEL_BORDER as f,PANEL_ACTIVE_TITLE_FOREGROUND as z,PANEL_INACTIVE_TITLE_FOREGROUND as G,PANEL_ACTIVE_TITLE_BORDER as U,PANEL_DRAG_AND_DROP_BORDER as Y}from"../../../common/theme.js";import{contrastBorder as A,badgeBackground as j,badgeForeground as J}from"../../../../platform/theme/common/colorRegistry.js";import{INotificationService as Z}from"../../../../platform/notification/common/notification.js";import{Dimension as v}from"../../../../base/browser/dom.js";import{IContextKeyService as q}from"../../../../platform/contextkey/common/contextkey.js";import{assertIsDefined as Q}from"../../../../base/common/types.js";import{IExtensionService as X}from"../../../services/extensions/common/extensions.js";import{IViewDescriptorService as $}from"../../../common/views.js";import{HoverPosition as w}from"../../../../base/browser/ui/hover/hoverWidget.js";import{IMenuService as ee,MenuId as P}from"../../../../platform/actions/common/actions.js";import{AbstractPaneCompositePart as oe,CompositeBarPosition as ie}from"../paneCompositePart.js";import{ICommandService as te}from"../../../../platform/commands/common/commands.js";import{createAndFillInContextMenuActions as y}from"../../../../platform/actions/browser/menuEntryActionViewItem.js";import"../paneCompositeBar.js";import{IHoverService as re}from"../../../../platform/hover/browser/hover.js";import{IConfigurationService as ne}from"../../../../platform/configuration/common/configuration.js";let s=class extends oe{constructor(e,o,i,n,r,m,p,T,E,u,L,ae,O,se){super(I.PANEL_PART,{hasTitle:!0},s.activePanelSettingsKey,_.bindTo(u),M.bindTo(u),"panel","panel",void 0,e,o,i,n,r,m,p,T,E,u,L,O);this.commandService=ae;this.configurationService=se;this._register(this.configurationService.onDidChangeConfiguration(B=>{B.affectsConfiguration("workbench.panel.showLabels")&&this.updateCompositeBar(!0)}))}minimumWidth=300;maximumWidth=Number.POSITIVE_INFINITY;minimumHeight=77;maximumHeight=Number.POSITIVE_INFINITY;get preferredHeight(){return this.layoutService.mainContainerDimension.height*.4}get preferredWidth(){const e=this.getActivePaneComposite();if(!e)return;const o=e.getOptimalWidth();if(typeof o=="number")return Math.max(o,300)}static activePanelSettingsKey="workbench.panelpart.activepanelid";updateStyles(){super.updateStyles();const e=Q(this.getContainer());e.style.backgroundColor=this.getColor(g)||"";const o=this.getColor(f)||this.getColor(A)||"";e.style.borderLeftColor=o,e.style.borderRightColor=o,e.style.borderBottomColor=o;const i=this.getTitleArea();i&&(i.style.borderTopColor=this.getColor(f)||this.getColor(A)||"")}getCompositeBarOptions(){return{partContainerClass:"panel",pinnedViewContainersKey:"workbench.panel.pinnedPanels",placeholderViewContainersKey:"workbench.panel.placeholderPanels",viewContainersWorkspaceStateKey:"workbench.panel.viewContainersWorkspaceState",icon:this.configurationService.getValue("workbench.panel.showLabels")===!1,orientation:D.HORIZONTAL,recomputeSizes:!0,activityHoverOptions:{position:()=>this.layoutService.getPanelPosition()===d.BOTTOM&&!this.layoutService.isPanelMaximized()?w.ABOVE:w.BELOW},fillExtraContextMenuActions:e=>this.fillExtraContextMenuActions(e),compositeSize:0,iconSize:16,overflowActionSize:44,colors:e=>({activeBackgroundColor:e.getColor(g),inactiveBackgroundColor:e.getColor(g),activeBorderBottomColor:e.getColor(U),activeForegroundColor:e.getColor(z),inactiveForegroundColor:e.getColor(G),badgeBackground:e.getColor(j),badgeForeground:e.getColor(J),dragAndDropBorder:e.getColor(Y)})}}fillExtraContextMenuActions(e){const o=this.menuService.getMenuActions(P.PanelPositionMenu,this.contextKeyService,{shouldForwardArgs:!0}),i=this.menuService.getMenuActions(P.PanelAlignmentMenu,this.contextKeyService,{shouldForwardArgs:!0}),n=[],r=[];y(o,{primary:[],secondary:n}),y(i,{primary:[],secondary:r});const m=this.configurationService.getValue("workbench.panel.showLabels"),p=h({id:"workbench.action.panel.toggleShowLabels",label:m?c("showIcons","Show Icons"):c("showLabels","Show Labels"),run:()=>this.configurationService.updateValue("workbench.panel.showLabels",!m)});e.push(new x,new S("workbench.action.panel.position",c("panel position","Panel Position"),n),new S("workbench.action.panel.align",c("align panel","Align Panel"),r),p,h({id:b.ID,label:c("hidePanel","Hide Panel"),run:()=>this.commandService.executeCommand(b.ID)}))}layout(e,o,i,n){let r;switch(this.layoutService.getPanelPosition()){case d.RIGHT:r=new v(e-1,o);break;case d.TOP:r=new v(e,o-1);break;default:r=new v(e,o);break}super.layout(r.width,r.height,i,n)}shouldShowCompositeBar(){return!0}getCompositeBarPosition(){return ie.TITLE}toJSON(){return{type:I.PANEL_PART}}};s=C([t(0,Z),t(1,V),t(2,F),t(3,R),t(4,H),t(5,re),t(6,K),t(7,W),t(8,$),t(9,q),t(10,X),t(11,te),t(12,ee),t(13,ne)],s);export{s as PanelPart};
