{
  "version": 3,
  "sources": ["../../../../../../../../../../../Dependency/Land/Dependency/Editor/Source/vs/workbench/contrib/chat/browser/actions/chatTitleActions.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport { KeyCode, KeyMod } from '../../../../../base/common/keyCodes.js';\nimport { ResourceSet } from '../../../../../base/common/map.js';\nimport { marked } from '../../../../../base/common/marked/marked.js';\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { ServicesAccessor } from '../../../../../editor/browser/editorExtensions.js';\nimport { IBulkEditService } from '../../../../../editor/browser/services/bulkEditService.js';\nimport { isLocation } from '../../../../../editor/common/languages.js';\nimport { localize, localize2 } from '../../../../../nls.js';\nimport { Action2, MenuId, registerAction2 } from '../../../../../platform/actions/common/actions.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { IDialogService } from '../../../../../platform/dialogs/common/dialogs.js';\nimport { KeybindingWeight } from '../../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { IEditorService } from '../../../../services/editor/common/editorService.js';\nimport { IViewsService } from '../../../../services/views/common/viewsService.js';\nimport { ResourceNotebookCellEdit } from '../../../bulkEdit/browser/bulkCellEdits.js';\nimport { MENU_INLINE_CHAT_WIDGET_SECONDARY } from '../../../inlineChat/common/inlineChat.js';\nimport { INotebookEditor } from '../../../notebook/browser/notebookBrowser.js';\nimport { CellEditType, CellKind, NOTEBOOK_EDITOR_ID } from '../../../notebook/common/notebookCommon.js';\nimport { NOTEBOOK_IS_ACTIVE_EDITOR } from '../../../notebook/common/notebookContextKeys.js';\nimport { ChatAgentLocation, IChatAgentService } from '../../common/chatAgents.js';\nimport { CONTEXT_CHAT_EDITING_PARTICIPANT_REGISTERED, CONTEXT_CHAT_ENABLED, CONTEXT_CHAT_LOCATION, CONTEXT_CHAT_RESPONSE_SUPPORT_ISSUE_REPORTING, CONTEXT_IN_CHAT_INPUT, CONTEXT_IN_CHAT_SESSION, CONTEXT_ITEM_ID, CONTEXT_LAST_ITEM_ID, CONTEXT_REQUEST, CONTEXT_RESPONSE, CONTEXT_RESPONSE_ERROR, CONTEXT_RESPONSE_FILTERED, CONTEXT_RESPONSE_VOTE } from '../../common/chatContextKeys.js';\nimport { IChatEditingService } from '../../common/chatEditingService.js';\nimport { IParsedChatRequest } from '../../common/chatParserTypes.js';\nimport { ChatAgentVoteDirection, ChatAgentVoteDownReason, IChatProgress, IChatService } from '../../common/chatService.js';\nimport { isRequestVM, isResponseVM } from '../../common/chatViewModel.js';\nimport { ChatTreeItem, EDITS_VIEW_ID, IChatWidgetService } from '../chat.js';\nimport { ChatViewPane } from '../chatViewPane.js';\nimport { CHAT_CATEGORY } from './chatActions.js';\n\nexport const MarkUnhelpfulActionId = 'workbench.action.chat.markUnhelpful';\n\nexport function registerChatTitleActions() {\n\tregisterAction2(class MarkHelpfulAction extends Action2 {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: 'workbench.action.chat.markHelpful',\n\t\t\t\ttitle: localize2('interactive.helpful.label', \"Helpful\"),\n\t\t\t\tf1: false,\n\t\t\t\tcategory: CHAT_CATEGORY,\n\t\t\t\ticon: Codicon.thumbsup,\n\t\t\t\ttoggled: CONTEXT_RESPONSE_VOTE.isEqualTo('up'),\n\t\t\t\tmenu: [{\n\t\t\t\t\tid: MenuId.ChatMessageFooter,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\torder: 1,\n\t\t\t\t\twhen: ContextKeyExpr.and(CONTEXT_RESPONSE, CONTEXT_RESPONSE_ERROR.negate())\n\t\t\t\t}, {\n\t\t\t\t\tid: MENU_INLINE_CHAT_WIDGET_SECONDARY,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\torder: 1,\n\t\t\t\t\twhen: ContextKeyExpr.and(CONTEXT_RESPONSE, CONTEXT_RESPONSE_ERROR.negate())\n\t\t\t\t}]\n\t\t\t});\n\t\t}\n\n\t\trun(accessor: ServicesAccessor, ...args: any[]) {\n\t\t\tconst item = args[0];\n\t\t\tif (!isResponseVM(item)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst chatService = accessor.get(IChatService);\n\t\t\tchatService.notifyUserAction({\n\t\t\t\tagentId: item.agent?.id,\n\t\t\t\tcommand: item.slashCommand?.name,\n\t\t\t\tsessionId: item.sessionId,\n\t\t\t\trequestId: item.requestId,\n\t\t\t\tresult: item.result,\n\t\t\t\taction: {\n\t\t\t\t\tkind: 'vote',\n\t\t\t\t\tdirection: ChatAgentVoteDirection.Up,\n\t\t\t\t\treason: undefined\n\t\t\t\t}\n\t\t\t});\n\t\t\titem.setVote(ChatAgentVoteDirection.Up);\n\t\t\titem.setVoteDownReason(undefined);\n\t\t}\n\t});\n\n\tregisterAction2(class MarkUnhelpfulAction extends Action2 {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: MarkUnhelpfulActionId,\n\t\t\t\ttitle: localize2('interactive.unhelpful.label', \"Unhelpful\"),\n\t\t\t\tf1: false,\n\t\t\t\tcategory: CHAT_CATEGORY,\n\t\t\t\ticon: Codicon.thumbsdown,\n\t\t\t\ttoggled: CONTEXT_RESPONSE_VOTE.isEqualTo('down'),\n\t\t\t\tmenu: [{\n\t\t\t\t\tid: MenuId.ChatMessageFooter,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\torder: 2,\n\t\t\t\t\twhen: ContextKeyExpr.and(CONTEXT_RESPONSE)\n\t\t\t\t}, {\n\t\t\t\t\tid: MENU_INLINE_CHAT_WIDGET_SECONDARY,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\torder: 2,\n\t\t\t\t\twhen: ContextKeyExpr.and(CONTEXT_RESPONSE, CONTEXT_RESPONSE_ERROR.negate())\n\t\t\t\t}]\n\t\t\t});\n\t\t}\n\n\t\trun(accessor: ServicesAccessor, ...args: any[]) {\n\t\t\tconst item = args[0];\n\t\t\tif (!isResponseVM(item)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst reason = args[1];\n\t\t\tif (typeof reason !== 'string') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\titem.setVote(ChatAgentVoteDirection.Down);\n\t\t\titem.setVoteDownReason(reason as ChatAgentVoteDownReason);\n\n\t\t\tconst chatService = accessor.get(IChatService);\n\t\t\tchatService.notifyUserAction({\n\t\t\t\tagentId: item.agent?.id,\n\t\t\t\tcommand: item.slashCommand?.name,\n\t\t\t\tsessionId: item.sessionId,\n\t\t\t\trequestId: item.requestId,\n\t\t\t\tresult: item.result,\n\t\t\t\taction: {\n\t\t\t\t\tkind: 'vote',\n\t\t\t\t\tdirection: ChatAgentVoteDirection.Down,\n\t\t\t\t\treason: item.voteDownReason\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n\n\tregisterAction2(class ReportIssueForBugAction extends Action2 {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: 'workbench.action.chat.reportIssueForBug',\n\t\t\t\ttitle: localize2('interactive.reportIssueForBug.label', \"Report Issue\"),\n\t\t\t\tf1: false,\n\t\t\t\tcategory: CHAT_CATEGORY,\n\t\t\t\ticon: Codicon.report,\n\t\t\t\tmenu: [{\n\t\t\t\t\tid: MenuId.ChatMessageFooter,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\torder: 3,\n\t\t\t\t\twhen: ContextKeyExpr.and(CONTEXT_CHAT_RESPONSE_SUPPORT_ISSUE_REPORTING, CONTEXT_RESPONSE)\n\t\t\t\t}, {\n\t\t\t\t\tid: MENU_INLINE_CHAT_WIDGET_SECONDARY,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\torder: 3,\n\t\t\t\t\twhen: ContextKeyExpr.and(CONTEXT_CHAT_RESPONSE_SUPPORT_ISSUE_REPORTING, CONTEXT_RESPONSE)\n\t\t\t\t}]\n\t\t\t});\n\t\t}\n\n\t\trun(accessor: ServicesAccessor, ...args: any[]) {\n\t\t\tconst item = args[0];\n\t\t\tif (!isResponseVM(item)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst chatService = accessor.get(IChatService);\n\t\t\tchatService.notifyUserAction({\n\t\t\t\tagentId: item.agent?.id,\n\t\t\t\tcommand: item.slashCommand?.name,\n\t\t\t\tsessionId: item.sessionId,\n\t\t\t\trequestId: item.requestId,\n\t\t\t\tresult: item.result,\n\t\t\t\taction: {\n\t\t\t\t\tkind: 'bug'\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n\n\tregisterAction2(class RetryChatAction extends Action2 {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: 'workbench.action.chat.retry',\n\t\t\t\ttitle: localize2('chat.retry.label', \"Retry\"),\n\t\t\t\tf1: false,\n\t\t\t\tcategory: CHAT_CATEGORY,\n\t\t\t\ticon: Codicon.refresh,\n\t\t\t\tmenu: [{\n\t\t\t\t\tid: MenuId.ChatMessageFooter,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tCONTEXT_RESPONSE,\n\t\t\t\t\t\tContextKeyExpr.in(CONTEXT_ITEM_ID.key, CONTEXT_LAST_ITEM_ID.key))\n\t\t\t\t}]\n\t\t\t});\n\t\t}\n\n\t\tasync run(accessor: ServicesAccessor, ...args: any[]) {\n\t\t\tconst item = args[0];\n\t\t\tif (!isResponseVM(item)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst chatService = accessor.get(IChatService);\n\t\t\tconst chatWidgetService = accessor.get(IChatWidgetService);\n\t\t\tconst chatEditingService = accessor.get(IChatEditingService);\n\t\t\tconst chatModel = chatService.getSession(item.sessionId);\n\t\t\tconst chatRequests = chatModel?.getRequests();\n\t\t\tif (!chatRequests) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst itemIndex = chatRequests?.findIndex(request => request.id === item.requestId);\n\t\t\tif (chatModel?.initialLocation === ChatAgentLocation.EditingSession) {\n\t\t\t\tconst configurationService = accessor.get(IConfigurationService);\n\t\t\t\tconst dialogService = accessor.get(IDialogService);\n\t\t\t\tconst shouldPrompt = configurationService.getValue('chat.editing.confirmEditRequestRetry') === true;\n\t\t\t\tconst confirmation = shouldPrompt\n\t\t\t\t\t? await dialogService.confirm({\n\t\t\t\t\t\ttitle: localize('chat.retryLast.confirmation.title', \"Do you want to retry your last edit?\"),\n\t\t\t\t\t\tmessage: localize('chat.retry.confirmation.message', \"This will also undo any edits made to your working set from this request.\"),\n\t\t\t\t\t\tprimaryButton: localize('chat.retry.confirmation.primaryButton', \"Yes\"),\n\t\t\t\t\t\tcheckbox: { label: localize('chat.retry.confirmation.checkbox', \"Don't ask again\"), checked: false },\n\t\t\t\t\t\ttype: 'info'\n\t\t\t\t\t})\n\t\t\t\t\t: { confirmed: true };\n\n\t\t\t\tif (!confirmation.confirmed) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (confirmation.checkboxChecked) {\n\t\t\t\t\tawait configurationService.updateValue('chat.editing.confirmEditRequestRetry', false);\n\t\t\t\t}\n\n\t\t\t\t// Reset the snapshot\n\t\t\t\tconst snapshotRequest = chatRequests[itemIndex];\n\t\t\t\tif (snapshotRequest) {\n\t\t\t\t\tawait chatEditingService.restoreSnapshot(snapshotRequest.id);\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst request = chatModel?.getRequests().find(candidate => candidate.id === item.requestId);\n\t\t\tconst languageModelId = chatWidgetService.getWidgetBySessionId(item.sessionId)?.input.currentLanguageModel;\n\t\t\tchatService.resendRequest(request!, { userSelectedModelId: languageModelId });\n\t\t}\n\t});\n\n\tregisterAction2(class InsertToNotebookAction extends Action2 {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: 'workbench.action.chat.insertIntoNotebook',\n\t\t\t\ttitle: localize2('interactive.insertIntoNotebook.label', \"Insert into Notebook\"),\n\t\t\t\tf1: false,\n\t\t\t\tcategory: CHAT_CATEGORY,\n\t\t\t\ticon: Codicon.insert,\n\t\t\t\tmenu: {\n\t\t\t\t\tid: MenuId.ChatMessageFooter,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\tisHiddenByDefault: true,\n\t\t\t\t\twhen: ContextKeyExpr.and(NOTEBOOK_IS_ACTIVE_EDITOR, CONTEXT_RESPONSE, CONTEXT_RESPONSE_FILTERED.negate())\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tasync run(accessor: ServicesAccessor, ...args: any[]) {\n\t\t\tconst item = args[0];\n\t\t\tif (!isResponseVM(item)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst editorService = accessor.get(IEditorService);\n\n\t\t\tif (editorService.activeEditorPane?.getId() === NOTEBOOK_EDITOR_ID) {\n\t\t\t\tconst notebookEditor = editorService.activeEditorPane.getControl() as INotebookEditor;\n\n\t\t\t\tif (!notebookEditor.hasModel()) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (notebookEditor.isReadOnly) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst value = item.response.toString();\n\t\t\t\tconst splitContents = splitMarkdownAndCodeBlocks(value);\n\n\t\t\t\tconst focusRange = notebookEditor.getFocus();\n\t\t\t\tconst index = Math.max(focusRange.end, 0);\n\t\t\t\tconst bulkEditService = accessor.get(IBulkEditService);\n\n\t\t\t\tawait bulkEditService.apply(\n\t\t\t\t\t[\n\t\t\t\t\t\tnew ResourceNotebookCellEdit(notebookEditor.textModel.uri,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\teditType: CellEditType.Replace,\n\t\t\t\t\t\t\t\tindex: index,\n\t\t\t\t\t\t\t\tcount: 0,\n\t\t\t\t\t\t\t\tcells: splitContents.map(content => {\n\t\t\t\t\t\t\t\t\tconst kind = content.type === 'markdown' ? CellKind.Markup : CellKind.Code;\n\t\t\t\t\t\t\t\t\tconst language = content.type === 'markdown' ? 'markdown' : content.language;\n\t\t\t\t\t\t\t\t\tconst mime = content.type === 'markdown' ? 'text/markdown' : `text/x-${content.language}`;\n\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\tcellKind: kind,\n\t\t\t\t\t\t\t\t\t\tlanguage,\n\t\t\t\t\t\t\t\t\t\tmime,\n\t\t\t\t\t\t\t\t\t\tsource: content.content,\n\t\t\t\t\t\t\t\t\t\toutputs: [],\n\t\t\t\t\t\t\t\t\t\tmetadata: {}\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)\n\t\t\t\t\t],\n\t\t\t\t\t{ quotableLabel: 'Insert into Notebook' }\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t});\n\n\n\tregisterAction2(class RemoveAction extends Action2 {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: 'workbench.action.chat.remove',\n\t\t\t\ttitle: localize2('chat.remove.label', \"Remove Request and Response\"),\n\t\t\t\tf1: false,\n\t\t\t\tcategory: CHAT_CATEGORY,\n\t\t\t\ticon: Codicon.x,\n\t\t\t\tprecondition: CONTEXT_CHAT_LOCATION.notEqualsTo(ChatAgentLocation.EditingSession),\n\t\t\t\tkeybinding: {\n\t\t\t\t\tprimary: KeyCode.Delete,\n\t\t\t\t\tmac: {\n\t\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.Backspace,\n\t\t\t\t\t},\n\t\t\t\t\twhen: ContextKeyExpr.and(CONTEXT_CHAT_LOCATION.notEqualsTo(ChatAgentLocation.EditingSession), CONTEXT_IN_CHAT_SESSION, CONTEXT_IN_CHAT_INPUT.negate()),\n\t\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\t},\n\t\t\t\tmenu: {\n\t\t\t\t\tid: MenuId.ChatMessageTitle,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\torder: 2,\n\t\t\t\t\twhen: ContextKeyExpr.and(CONTEXT_CHAT_LOCATION.notEqualsTo(ChatAgentLocation.EditingSession), CONTEXT_REQUEST)\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\trun(accessor: ServicesAccessor, ...args: any[]) {\n\t\t\tlet item: ChatTreeItem | undefined = args[0];\n\t\t\tif (!isRequestVM(item)) {\n\t\t\t\tconst chatWidgetService = accessor.get(IChatWidgetService);\n\t\t\t\tconst widget = chatWidgetService.lastFocusedWidget;\n\t\t\t\titem = widget?.getFocus();\n\t\t\t}\n\n\t\t\tif (!item) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst chatService = accessor.get(IChatService);\n\t\t\tconst chatModel = chatService.getSession(item.sessionId);\n\t\t\tif (chatModel?.initialLocation === ChatAgentLocation.EditingSession) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst requestId = isRequestVM(item) ? item.id :\n\t\t\t\tisResponseVM(item) ? item.requestId : undefined;\n\n\t\t\tif (requestId) {\n\t\t\t\tconst chatService = accessor.get(IChatService);\n\t\t\t\tchatService.removeRequest(item.sessionId, requestId);\n\t\t\t}\n\t\t}\n\t});\n\n\tregisterAction2(class ContinueEditingAction extends Action2 {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: 'workbench.action.chat.startEditing',\n\t\t\t\ttitle: localize2('chat.startEditing.label2', \"Edit with Copilot\"),\n\t\t\t\tf1: false,\n\t\t\t\tcategory: CHAT_CATEGORY,\n\t\t\t\ticon: Codicon.edit,\n\t\t\t\tprecondition: ContextKeyExpr.and(CONTEXT_CHAT_EDITING_PARTICIPANT_REGISTERED, CONTEXT_CHAT_LOCATION.notEqualsTo(ChatAgentLocation.EditingSession)),\n\t\t\t\tmenu: {\n\t\t\t\t\tid: MenuId.ChatMessageFooter,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\torder: 4,\n\t\t\t\t\twhen: ContextKeyExpr.and(CONTEXT_CHAT_ENABLED, CONTEXT_CHAT_EDITING_PARTICIPANT_REGISTERED, CONTEXT_CHAT_LOCATION.notEqualsTo(ChatAgentLocation.EditingSession))\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tasync run(accessor: ServicesAccessor, ...args: any[]) {\n\t\t\tif (!accessor.get(IChatAgentService).getDefaultAgent(ChatAgentLocation.EditingSession)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst chatWidgetService = accessor.get(IChatWidgetService);\n\t\t\tconst chatService = accessor.get(IChatService);\n\t\t\tconst viewsService = accessor.get(IViewsService);\n\t\t\tconst dialogService = accessor.get(IDialogService);\n\t\t\tconst chatEditingService = accessor.get(IChatEditingService);\n\n\t\t\tlet item: ChatTreeItem | undefined = args[0];\n\t\t\tif (!isResponseVM(item)) {\n\t\t\t\tconst widget = chatWidgetService.lastFocusedWidget;\n\t\t\t\titem = widget?.getFocus();\n\t\t\t}\n\n\t\t\tif (!item) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst chatModel = chatService.getSession(item.sessionId);\n\t\t\tif (chatModel?.initialLocation === ChatAgentLocation.EditingSession) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst requestId = isRequestVM(item) ? item.id :\n\t\t\t\tisResponseVM(item) ? item.requestId : undefined;\n\t\t\tconst request = chatModel?.getRequests().find(candidate => candidate.id === requestId);\n\n\t\t\tif (request) {\n\t\t\t\tconst currentEditingSession = chatEditingService.currentEditingSessionObs.get();\n\t\t\t\tconst currentEditCount = currentEditingSession?.entries.get().length;\n\t\t\t\tif (currentEditCount) {\n\t\t\t\t\tconst result = await dialogService.confirm({\n\t\t\t\t\t\ttitle: localize('chat.startEditing.confirmation.title', \"Start new editing session?\"),\n\t\t\t\t\t\tmessage: localize('chat.startEditing.confirmation.message', \"Starting a new editing session will end your current editing session and discard edits to {0} files. Do you wish to proceed?\", currentEditCount),\n\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\tprimaryButton: localize('chat.startEditing.confirmation.primaryButton', \"Yes\")\n\t\t\t\t\t});\n\n\t\t\t\t\tif (!result.confirmed) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tawait currentEditingSession?.stop();\n\t\t\t\t}\n\n\t\t\t\tconst { widget } = await viewsService.openView(EDITS_VIEW_ID) as ChatViewPane;\n\t\t\t\tif (widget.viewModel) {\n\t\t\t\t\tconst workingSetInputs = new ResourceSet();\n\t\t\t\t\tconst message: IChatProgress[] = [];\n\t\t\t\t\tfor (const item of request.response?.response.value ?? []) {\n\t\t\t\t\t\tif (item.kind === 'inlineReference') {\n\t\t\t\t\t\t\tworkingSetInputs.add(isLocation(item.inlineReference) ? item.inlineReference.uri : URI.isUri(item.inlineReference) ? item.inlineReference : item.inlineReference.location.uri);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (item.kind === 'textEditGroup') {\n\t\t\t\t\t\t\tfor (const group of item.edits) {\n\t\t\t\t\t\t\t\tmessage.push({\n\t\t\t\t\t\t\t\t\tkind: 'textEdit',\n\t\t\t\t\t\t\t\t\tedits: group,\n\t\t\t\t\t\t\t\t\turi: item.uri\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tmessage.push(item);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tchatService.addCompleteRequest(widget.viewModel.sessionId,\n\t\t\t\t\t\trequest.message as IParsedChatRequest,\n\t\t\t\t\t\trequest.variableData,\n\t\t\t\t\t\trequest.attempt,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmessage,\n\t\t\t\t\t\t\tresult: request.response?.result,\n\t\t\t\t\t\t\tfollowups: request.response?.followups\n\t\t\t\t\t\t});\n\n\t\t\t\t\tif (workingSetInputs.size) {\n\t\t\t\t\t\tfor (const reference of workingSetInputs) {\n\t\t\t\t\t\t\tawait chatEditingService.addFileToWorkingSet(reference);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfor (const { reference } of request.response?.contentReferences ?? []) {\n\t\t\t\t\t\t\tif (URI.isUri(reference) && [Schemas.file, Schemas.vscodeRemote].includes(reference.scheme)) {\n\t\t\t\t\t\t\t\tawait chatEditingService.addFileToWorkingSet(reference);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t});\n}\n\ninterface MarkdownContent {\n\ttype: 'markdown';\n\tcontent: string;\n}\n\ninterface CodeContent {\n\ttype: 'code';\n\tlanguage: string;\n\tcontent: string;\n}\n\ntype Content = MarkdownContent | CodeContent;\n\nfunction splitMarkdownAndCodeBlocks(markdown: string): Content[] {\n\tconst lexer = new marked.Lexer();\n\tconst tokens = lexer.lex(markdown);\n\n\tconst splitContent: Content[] = [];\n\n\tlet markdownPart = '';\n\ttokens.forEach((token) => {\n\t\tif (token.type === 'code') {\n\t\t\tif (markdownPart.trim()) {\n\t\t\t\tsplitContent.push({ type: 'markdown', content: markdownPart });\n\t\t\t\tmarkdownPart = '';\n\t\t\t}\n\t\t\tsplitContent.push({\n\t\t\t\ttype: 'code',\n\t\t\t\tlanguage: token.lang || '',\n\t\t\t\tcontent: token.text,\n\t\t\t});\n\t\t} else {\n\t\t\tmarkdownPart += token.raw;\n\t\t}\n\t});\n\n\tif (markdownPart.trim()) {\n\t\tsplitContent.push({ type: 'markdown', content: markdownPart });\n\t}\n\n\treturn splitContent;\n}\n"],
  "mappings": "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",
  "names": ["request", "chatService", "item"]
}
