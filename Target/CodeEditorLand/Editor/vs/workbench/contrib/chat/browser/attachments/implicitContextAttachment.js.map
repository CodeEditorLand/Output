{
  "version": 3,
  "sources": ["../../../../../../../../../../../Dependency/Land/Dependency/Editor/Source/vs/workbench/contrib/chat/browser/attachments/implicitContextAttachment.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from '../../../../../base/browser/dom.js';\nimport { Button } from '../../../../../base/browser/ui/button/button.js';\nimport { getDefaultHoverDelegate } from '../../../../../base/browser/ui/hover/hoverDelegateFactory.js';\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport { Disposable, DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { basename, dirname } from '../../../../../base/common/resources.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { localize } from '../../../../../nls.js';\nimport { FileKind } from '../../../../../platform/files/common/files.js';\nimport { IHoverService } from '../../../../../platform/hover/browser/hover.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { ResourceLabels } from '../../../../browser/labels.js';\nimport { IChatRequestImplicitVariableEntry } from '../../common/chatModel.js';\n\nexport class ImplicitContextAttachmentWidget extends Disposable {\n\tpublic readonly domNode: HTMLElement;\n\n\tprivate readonly renderDisposables = this._register(new DisposableStore());\n\n\tconstructor(\n\t\tprivate readonly attachment: IChatRequestImplicitVariableEntry,\n\t\tprivate readonly resourceLabels: ResourceLabels,\n\t\t@ILabelService private readonly labelService: ILabelService,\n\t\t@IHoverService private readonly hoverService: IHoverService,\n\t) {\n\t\tsuper();\n\n\t\tthis.domNode = dom.$('.chat-attached-context-attachment.show-file-icons.implicit');\n\t\tthis.render();\n\t}\n\n\tprivate render() {\n\t\tdom.clearNode(this.domNode);\n\t\tthis.renderDisposables.clear();\n\n\t\tthis.domNode.classList.toggle('disabled', !this.attachment.enabled);\n\t\tconst label = this.resourceLabels.create(this.domNode, { supportIcons: true });\n\t\tconst file = URI.isUri(this.attachment.value) ? this.attachment.value : this.attachment.value!.uri;\n\t\tconst range = URI.isUri(this.attachment.value) ? undefined : this.attachment.value!.range;\n\n\t\tconst fileBasename = basename(file);\n\t\tconst fileDirname = dirname(file);\n\t\tconst friendlyName = `${fileBasename} ${fileDirname}`;\n\t\tconst ariaLabel = range ? localize('chat.fileAttachmentWithRange', \"Attached file, {0}, line {1} to line {2}\", friendlyName, range.startLineNumber, range.endLineNumber) : localize('chat.fileAttachment', \"Attached file, {0}\", friendlyName);\n\n\t\tconst uriLabel = this.labelService.getUriLabel(file, { relative: true });\n\t\tconst currentFile = localize('openEditor', \"Current file context\");\n\t\tconst inactive = localize('enableHint', \"disabled\");\n\t\tconst currentFileHint = currentFile + (this.attachment.enabled ? '' : ` (${inactive})`);\n\t\tconst title = `${currentFileHint}\\n${uriLabel}`;\n\t\tlabel.setFile(file, {\n\t\t\tfileKind: FileKind.FILE,\n\t\t\thidePath: true,\n\t\t\trange,\n\t\t\ttitle\n\t\t});\n\t\tthis.domNode.ariaLabel = ariaLabel;\n\t\tthis.domNode.tabIndex = 0;\n\t\tconst hintElement = dom.append(this.domNode, dom.$('span.chat-implicit-hint', undefined, 'Current file'));\n\t\tthis._register(this.hoverService.setupManagedHover(getDefaultHoverDelegate('element'), hintElement, title));\n\n\t\tconst buttonMsg = this.attachment.enabled ? localize('disable', \"Disable current file context\") : localize('enable', \"Enable current file context\");\n\t\tconst toggleButton = this.renderDisposables.add(new Button(this.domNode, { supportIcons: true, title: buttonMsg }));\n\t\ttoggleButton.icon = this.attachment.enabled ? Codicon.eye : Codicon.eyeClosed;\n\t\tthis.renderDisposables.add(toggleButton.onDidClick((e) => {\n\t\t\te.stopPropagation(); // prevent it from triggering the click handler on the parent immediately after rerendering\n\t\t\tthis.attachment.enabled = !this.attachment.enabled;\n\t\t}));\n\t}\n}\n"],
  "mappings": ";;;;;;;;;;;;AAKA,YAAY,SAAS;AACrB,SAAS,cAAc;AACvB,SAAS,+BAA+B;AACxC,SAAS,eAAe;AACxB,SAAS,YAAY,uBAAuB;AAC5C,SAAS,UAAU,eAAe;AAClC,SAAS,WAAW;AACpB,SAAS,gBAAgB;AACzB,SAAS,gBAAgB;AACzB,SAAS,qBAAqB;AAC9B,SAAS,qBAAqB;AAC9B,SAAS,sBAAsB;AAC/B,SAAS,yCAAyC;AAE3C,IAAM,kCAAN,cAA8C,WAAW;AAAA,EAK/D,YACkB,YACA,gBACe,cACA,cAC/B;AACD,UAAM;AALW;AACA;AACe;AACA;AAIhC,SAAK,UAAU,IAAI,EAAE,4DAA4D;AACjF,SAAK,OAAO;AAAA,EACb;AAAA,EAlCD,OAmBgE;AAAA;AAAA;AAAA,EAC/C;AAAA,EAEC,oBAAoB,KAAK,UAAU,IAAI,gBAAgB,CAAC;AAAA,EAcjE,SAAS;AAChB,QAAI,UAAU,KAAK,OAAO;AAC1B,SAAK,kBAAkB,MAAM;AAE7B,SAAK,QAAQ,UAAU,OAAO,YAAY,CAAC,KAAK,WAAW,OAAO;AAClE,UAAM,QAAQ,KAAK,eAAe,OAAO,KAAK,SAAS,EAAE,cAAc,KAAK,CAAC;AAC7E,UAAM,OAAO,IAAI,MAAM,KAAK,WAAW,KAAK,IAAI,KAAK,WAAW,QAAQ,KAAK,WAAW,MAAO;AAC/F,UAAM,QAAQ,IAAI,MAAM,KAAK,WAAW,KAAK,IAAI,SAAY,KAAK,WAAW,MAAO;AAEpF,UAAM,eAAe,SAAS,IAAI;AAClC,UAAM,cAAc,QAAQ,IAAI;AAChC,UAAM,eAAe,GAAG,YAAY,IAAI,WAAW;AACnD,UAAM,YAAY,QAAQ,SAAS,gCAAgC,4CAA4C,cAAc,MAAM,iBAAiB,MAAM,aAAa,IAAI,SAAS,uBAAuB,sBAAsB,YAAY;AAE7O,UAAM,WAAW,KAAK,aAAa,YAAY,MAAM,EAAE,UAAU,KAAK,CAAC;AACvE,UAAM,cAAc,SAAS,cAAc,sBAAsB;AACjE,UAAM,WAAW,SAAS,cAAc,UAAU;AAClD,UAAM,kBAAkB,eAAe,KAAK,WAAW,UAAU,KAAK,KAAK,QAAQ;AACnF,UAAM,QAAQ,GAAG,eAAe;AAAA,EAAK,QAAQ;AAC7C,UAAM,QAAQ,MAAM;AAAA,MACnB,UAAU,SAAS;AAAA,MACnB,UAAU;AAAA,MACV;AAAA,MACA;AAAA,IACD,CAAC;AACD,SAAK,QAAQ,YAAY;AACzB,SAAK,QAAQ,WAAW;AACxB,UAAM,cAAc,IAAI,OAAO,KAAK,SAAS,IAAI,EAAE,2BAA2B,QAAW,cAAc,CAAC;AACxG,SAAK,UAAU,KAAK,aAAa,kBAAkB,wBAAwB,SAAS,GAAG,aAAa,KAAK,CAAC;AAE1G,UAAM,YAAY,KAAK,WAAW,UAAU,SAAS,WAAW,8BAA8B,IAAI,SAAS,UAAU,6BAA6B;AAClJ,UAAM,eAAe,KAAK,kBAAkB,IAAI,IAAI,OAAO,KAAK,SAAS,EAAE,cAAc,MAAM,OAAO,UAAU,CAAC,CAAC;AAClH,iBAAa,OAAO,KAAK,WAAW,UAAU,QAAQ,MAAM,QAAQ;AACpE,SAAK,kBAAkB,IAAI,aAAa,WAAW,CAAC,MAAM;AACzD,QAAE,gBAAgB;AAClB,WAAK,WAAW,UAAU,CAAC,KAAK,WAAW;AAAA,IAC5C,CAAC,CAAC;AAAA,EACH;AACD;AAvDa,kCAAN;AAAA,EAQJ;AAAA,EACA;AAAA,GATU;",
  "names": []
}
