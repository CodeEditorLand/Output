var p=Object.defineProperty;var w=Object.getOwnPropertyDescriptor;var m=(s,i,n,o)=>{for(var e=o>1?void 0:o?w(i,n):i,t=s.length-1,r;t>=0;t--)(r=s[t])&&(e=(o?r(i,n,e):r(e))||e);return o&&e&&p(i,n,e),e},l=(s,i)=>(n,o)=>i(n,o,s);import{MarkdownString as d}from"../../../../../base/common/htmlContent.js";import{ThemeIcon as g}from"../../../../../base/common/themables.js";import{localize as c}from"../../../../../nls.js";import{ContextKeyExpr as f}from"../../../../../platform/contextkey/common/contextkey.js";import{ILogService as u}from"../../../../../platform/log/common/log.js";import{Registry as b}from"../../../../../platform/registry/common/platform.js";import"../../../../common/contributions.js";import{checkProposedApiEnabled as y}from"../../../../services/extensions/common/extensions.js";import*as W from"../../../../services/extensions/common/extensionsRegistry.js";import{ChatViewsWelcomeExtensions as C}from"./chatViewsWelcome.js";const V=W.ExtensionsRegistry.registerExtensionPoint({extensionPoint:"chatViewsWelcome",jsonSchema:{description:c("vscode.extension.contributes.chatViewsWelcome","Contributes a welcome message to a chat view"),type:"array",items:{additionalProperties:!1,type:"object",properties:{icon:{type:"string",description:c("chatViewsWelcome.icon","The icon for the welcome message.")},title:{type:"string",description:c("chatViewsWelcome.title","The title of the welcome message.")},content:{type:"string",description:c("chatViewsWelcome.content","The content of the welcome message. The first command link will be rendered as a button.")},when:{type:"string",description:c("chatViewsWelcome.when","Condition when the welcome message is shown.")}}},required:["icon","title","contents","when"]}});let a=class{constructor(i){this.logService=i;V.setHandler((n,o)=>{for(const e of o.added)for(const t of e.value){y(e.description,"chatParticipantPrivate");const r=f.deserialize(t.when);if(!r){this.logService.error(`Could not deserialize 'when' clause for chatViewsWelcome contribution: ${t.when}`);continue}const h={...t,when:r,icon:g.fromString(t.icon),content:new d(t.content,{isTrusted:!0})};b.as(C.ChatViewsWelcomeRegistry).register(h)}})}static ID="workbench.contrib.chatViewsWelcomeHandler"};a=m([l(0,u)],a);export{a as ChatViewsWelcomeHandler};
