{
  "version": 3,
  "sources": ["../../../../../../../../../../Dependency/Land/Dependency/Editor/Source/vs/workbench/contrib/comments/browser/commentFormActions.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Button, ButtonWithDropdown } from '../../../../base/browser/ui/button/button.js';\nimport { ActionRunner, IAction } from '../../../../base/common/actions.js';\nimport { DisposableStore, IDisposable } from '../../../../base/common/lifecycle.js';\nimport { IMenu, SubmenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { defaultButtonStyles } from '../../../../platform/theme/browser/defaultStyles.js';\nimport { CommentCommandId } from '../common/commentCommandIds.js';\n\nexport class CommentFormActions implements IDisposable {\n\tprivate _buttonElements: HTMLElement[] = [];\n\tprivate readonly _toDispose = new DisposableStore();\n\tprivate _actions: IAction[] = [];\n\n\tconstructor(\n\t\tprivate readonly keybindingService: IKeybindingService,\n\t\tprivate readonly contextKeyService: IContextKeyService,\n\t\tprivate readonly contextMenuService: IContextMenuService,\n\t\tprivate container: HTMLElement,\n\t\tprivate actionHandler: (action: IAction) => void,\n\t\tprivate readonly maxActions?: number,\n\t\tprivate readonly supportDropdowns?: boolean,\n\t) { }\n\n\tsetActions(menu: IMenu, hasOnlySecondaryActions: boolean = false) {\n\t\tthis._toDispose.clear();\n\n\t\tthis._buttonElements.forEach(b => b.remove());\n\t\tthis._buttonElements = [];\n\n\t\tconst groups = menu.getActions({ shouldForwardArgs: true });\n\t\tlet isPrimary: boolean = !hasOnlySecondaryActions;\n\t\tfor (const group of groups) {\n\t\t\tconst [, actions] = group;\n\n\t\t\tthis._actions = actions;\n\t\t\tfor (const current of actions) {\n\t\t\t\tconst dropDownActions = this.supportDropdowns && current instanceof SubmenuItemAction ? current.actions : [];\n\t\t\t\tconst action = dropDownActions.length ? dropDownActions[0] : current;\n\t\t\t\tlet keybinding = this.keybindingService.lookupKeybinding(action.id, this.contextKeyService)?.getLabel();\n\t\t\t\tif (!keybinding && isPrimary) {\n\t\t\t\t\tkeybinding = this.keybindingService.lookupKeybinding(CommentCommandId.Submit, this.contextKeyService)?.getLabel();\n\t\t\t\t}\n\t\t\t\tconst title = keybinding ? `${action.label} (${keybinding})` : action.label;\n\t\t\t\tconst actionHandler = this.actionHandler;\n\t\t\t\tconst button = dropDownActions.length ? new ButtonWithDropdown(this.container, {\n\t\t\t\t\tcontextMenuProvider: this.contextMenuService,\n\t\t\t\t\tactions: dropDownActions,\n\t\t\t\t\tactionRunner: new class extends ActionRunner {\n\t\t\t\t\t\tprotected override async runAction(action: IAction, context?: unknown): Promise<void> {\n\t\t\t\t\t\t\treturn actionHandler(action);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tsecondary: !isPrimary,\n\t\t\t\t\ttitle,\n\t\t\t\t\taddPrimaryActionToDropdown: false,\n\t\t\t\t\t...defaultButtonStyles\n\t\t\t\t}) : new Button(this.container, { secondary: !isPrimary, title, ...defaultButtonStyles });\n\n\t\t\t\tisPrimary = false;\n\t\t\t\tthis._buttonElements.push(button.element);\n\n\t\t\t\tthis._toDispose.add(button);\n\t\t\t\tthis._toDispose.add(button.onDidClick(() => this.actionHandler(action)));\n\n\t\t\t\tbutton.enabled = action.enabled;\n\t\t\t\tbutton.label = action.label;\n\t\t\t\tif ((this.maxActions !== undefined) && (this._buttonElements.length >= this.maxActions)) {\n\t\t\t\t\tconsole.warn(`An extension has contributed more than the allowable number of actions to a comments menu.`);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\ttriggerDefaultAction() {\n\t\tif (this._actions.length) {\n\t\t\tconst lastAction = this._actions[0];\n\n\t\t\tif (lastAction.enabled) {\n\t\t\t\treturn this.actionHandler(lastAction);\n\t\t\t}\n\t\t}\n\t}\n\n\tdispose() {\n\t\tthis._toDispose.dispose();\n\t}\n}\n"],
  "mappings": ";;AAKA,SAAS,QAAQ,0BAA0B;AAC3C,SAAS,cAAc,eAAe;AACtC,SAAS,iBAAiB,mBAAmB;AAC7C,SAAS,OAAO,yBAAyB;AACzC,SAAS,0BAA0B;AACnC,SAAS,2BAA2B;AACpC,SAAS,0BAA0B;AACnC,SAAS,2BAA2B;AACpC,SAAS,wBAAwB;AAE1B,MAAM,mBAA0C;AAAA,EAKtD,YACkB,mBACA,mBACA,oBACT,WACA,eACS,YACA,kBAChB;AAPgB;AACA;AACA;AACT;AACA;AACS;AACA;AAAA,EACd;AAAA,EA5BL,OAeuD;AAAA;AAAA;AAAA,EAC9C,kBAAiC,CAAC;AAAA,EACzB,aAAa,IAAI,gBAAgB;AAAA,EAC1C,WAAsB,CAAC;AAAA,EAY/B,WAAW,MAAa,0BAAmC,OAAO;AACjE,SAAK,WAAW,MAAM;AAEtB,SAAK,gBAAgB,QAAQ,OAAK,EAAE,OAAO,CAAC;AAC5C,SAAK,kBAAkB,CAAC;AAExB,UAAM,SAAS,KAAK,WAAW,EAAE,mBAAmB,KAAK,CAAC;AAC1D,QAAI,YAAqB,CAAC;AAC1B,eAAW,SAAS,QAAQ;AAC3B,YAAM,CAAC,EAAE,OAAO,IAAI;AAEpB,WAAK,WAAW;AAChB,iBAAW,WAAW,SAAS;AAC9B,cAAM,kBAAkB,KAAK,oBAAoB,mBAAmB,oBAAoB,QAAQ,UAAU,CAAC;AAC3G,cAAM,SAAS,gBAAgB,SAAS,gBAAgB,CAAC,IAAI;AAC7D,YAAI,aAAa,KAAK,kBAAkB,iBAAiB,OAAO,IAAI,KAAK,iBAAiB,GAAG,SAAS;AACtG,YAAI,CAAC,cAAc,WAAW;AAC7B,uBAAa,KAAK,kBAAkB,iBAAiB,iBAAiB,QAAQ,KAAK,iBAAiB,GAAG,SAAS;AAAA,QACjH;AACA,cAAM,QAAQ,aAAa,GAAG,OAAO,KAAK,KAAK,UAAU,MAAM,OAAO;AACtE,cAAM,gBAAgB,KAAK;AAC3B,cAAM,SAAS,gBAAgB,SAAS,IAAI,mBAAmB,KAAK,WAAW;AAAA,UAC9E,qBAAqB,KAAK;AAAA,UAC1B,SAAS;AAAA,UACT,cAAc,IAAI,cAAc,aAAa;AAAA,YAC5C,MAAyB,UAAUA,SAAiB,SAAkC;AACrF,qBAAO,cAAcA,OAAM;AAAA,YAC5B;AAAA,UACD;AAAA,UACA,WAAW,CAAC;AAAA,UACZ;AAAA,UACA,4BAA4B;AAAA,UAC5B,GAAG;AAAA,QACJ,CAAC,IAAI,IAAI,OAAO,KAAK,WAAW,EAAE,WAAW,CAAC,WAAW,OAAO,GAAG,oBAAoB,CAAC;AAExF,oBAAY;AACZ,aAAK,gBAAgB,KAAK,OAAO,OAAO;AAExC,aAAK,WAAW,IAAI,MAAM;AAC1B,aAAK,WAAW,IAAI,OAAO,WAAW,MAAM,KAAK,cAAc,MAAM,CAAC,CAAC;AAEvE,eAAO,UAAU,OAAO;AACxB,eAAO,QAAQ,OAAO;AACtB,YAAK,KAAK,eAAe,UAAe,KAAK,gBAAgB,UAAU,KAAK,YAAa;AACxF,kBAAQ,KAAK,4FAA4F;AACzG;AAAA,QACD;AAAA,MACD;AAAA,IACD;AAAA,EACD;AAAA,EAEA,uBAAuB;AACtB,QAAI,KAAK,SAAS,QAAQ;AACzB,YAAM,aAAa,KAAK,SAAS,CAAC;AAElC,UAAI,WAAW,SAAS;AACvB,eAAO,KAAK,cAAc,UAAU;AAAA,MACrC;AAAA,IACD;AAAA,EACD;AAAA,EAEA,UAAU;AACT,SAAK,WAAW,QAAQ;AAAA,EACzB;AACD;",
  "names": ["action"]
}
