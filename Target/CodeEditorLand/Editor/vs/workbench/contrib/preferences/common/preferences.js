import{raceTimeout as _}from"../../../../base/common/async.js";import{CancellationToken as N}from"../../../../base/common/cancellation.js";import"../../../../base/common/collections.js";import"../../../../base/common/product.js";import{localize as c}from"../../../../nls.js";import{RawContextKey as e}from"../../../../platform/contextkey/common/contextkey.js";import"../../../../platform/extensionManagement/common/extensionManagement.js";import{createDecorator as S}from"../../../../platform/instantiation/common/instantiation.js";import"../../../../platform/product/common/productService.js";import"../../../services/preferences/common/preferences.js";const K=S("preferencesSearchService"),Y="settings.action.clearSearchResults",k="settings.action.showContextMenu",B="settings.action.suggestFilters",P=new e("inSettingsEditor",!1),L=new e("inSettingsJSONEditor",!1),U=new e("inSettingsSearch",!1),w=new e("settingsTocRowFocus",!1),F=new e("settingRowFocus",!1),H=new e("inKeybindings",!1),W=new e("inKeybindingsSearch",!1),X=new e("keybindingFocus",!1),v=new e("whenFocus",!1),j="keybindings.editor.searchKeybindings",J="keybindings.editor.clearSearchResults",q="keybindings.editor.clearSearchHistory",V="keybindings.editor.recordSearchKeys",z="keybindings.editor.toggleSortByPrecedence",Q="keybindings.editor.defineKeybinding",Z="keybindings.editor.addKeybinding",$="keybindings.editor.defineWhenExpression",ee="keybindings.editor.acceptWhenExpression",ne="keybindings.editor.rejectWhenExpression",te="keybindings.editor.removeKeybinding",oe="keybindings.editor.resetKeybinding",re="keybindings.editor.copyKeybindingEntry",ie="keybindings.editor.copyCommandKeybindingEntry",se="keybindings.editor.copyCommandTitle",Ee="keybindings.editor.showConflicts",ae="keybindings.editor.focusKeybindings",ce="keybindings.editor.showDefaultKeybindings",Ie="keybindings.editor.showUserKeybindings",_e="keybindings.editor.showExtensionKeybindings",Ne="modified",Se="ext:",Te="feature:",de="id:",le="lang:",De="tag:",ge="hasPolicy",Oe="workspaceTrust",xe="requireTrustedWorkspace",Re="workbench.action.openKeyboardLayoutPicker",pe=!0,T=!0,d=1e3;let E;async function Ce(i,n){if(T&&i.isEnabled()){if(E)return E;if(n.extensionRecommendations&&n.commonlyUsedSettings){const t={};Object.keys(n.extensionRecommendations).forEach(r=>{const s=n.extensionRecommendations[r];s.onSettingsEditorOpen&&(t[r]=s)});const o={};for(const r in t){const s=r,I=n.quality==="stable";try{const a=await _(i.getExtensions([{id:s,preRelease:!I}],N.None),d);if(a?.length===1)o[r]=a[0];else return}catch{return}}return E={settingsEditorRecommendedExtensions:t,recommendedExtensionsGalleryInfo:o,commonlyUsed:n.commonlyUsedSettings},E}}}function ye(i,n){const t=i??Number.MAX_SAFE_INTEGER,o=n??Number.MAX_SAFE_INTEGER;return t<o?-1:t>o?1:0}const me=c("previewIndicatorDescription","This setting controls a feature that is in active development."),ue=c("experimentalIndicatorDescription","This setting controls a feature that may change or be removed in the future. Adjusting this setting may result in instability.");export{H as CONTEXT_KEYBINDINGS_EDITOR,W as CONTEXT_KEYBINDINGS_SEARCH_FOCUS,X as CONTEXT_KEYBINDING_FOCUS,P as CONTEXT_SETTINGS_EDITOR,L as CONTEXT_SETTINGS_JSON_EDITOR,F as CONTEXT_SETTINGS_ROW_FOCUS,U as CONTEXT_SETTINGS_SEARCH_FOCUS,w as CONTEXT_TOC_ROW_FOCUS,v as CONTEXT_WHEN_FOCUS,T as ENABLE_EXTENSION_TOGGLE_SETTINGS,pe as ENABLE_LANGUAGE_FILTER,ue as EXPERIMENTAL_INDICATOR_DESCRIPTION,d as EXTENSION_FETCH_TIMEOUT_MS,Se as EXTENSION_SETTING_TAG,Te as FEATURE_SETTING_TAG,De as GENERAL_TAG_SETTING_TAG,de as ID_SETTING_TAG,K as IPreferencesSearchService,ee as KEYBINDINGS_EDITOR_COMMAND_ACCEPT_WHEN,Z as KEYBINDINGS_EDITOR_COMMAND_ADD,q as KEYBINDINGS_EDITOR_COMMAND_CLEAR_SEARCH_HISTORY,J as KEYBINDINGS_EDITOR_COMMAND_CLEAR_SEARCH_RESULTS,re as KEYBINDINGS_EDITOR_COMMAND_COPY,ie as KEYBINDINGS_EDITOR_COMMAND_COPY_COMMAND,se as KEYBINDINGS_EDITOR_COMMAND_COPY_COMMAND_TITLE,Q as KEYBINDINGS_EDITOR_COMMAND_DEFINE,$ as KEYBINDINGS_EDITOR_COMMAND_DEFINE_WHEN,ae as KEYBINDINGS_EDITOR_COMMAND_FOCUS_KEYBINDINGS,V as KEYBINDINGS_EDITOR_COMMAND_RECORD_SEARCH_KEYS,ne as KEYBINDINGS_EDITOR_COMMAND_REJECT_WHEN,te as KEYBINDINGS_EDITOR_COMMAND_REMOVE,oe as KEYBINDINGS_EDITOR_COMMAND_RESET,j as KEYBINDINGS_EDITOR_COMMAND_SEARCH,Ee as KEYBINDINGS_EDITOR_COMMAND_SHOW_SIMILAR,z as KEYBINDINGS_EDITOR_COMMAND_SORTBY_PRECEDENCE,ce as KEYBINDINGS_EDITOR_SHOW_DEFAULT_KEYBINDINGS,_e as KEYBINDINGS_EDITOR_SHOW_EXTENSION_KEYBINDINGS,Ie as KEYBINDINGS_EDITOR_SHOW_USER_KEYBINDINGS,Re as KEYBOARD_LAYOUT_OPEN_PICKER,le as LANGUAGE_SETTING_TAG,Ne as MODIFIED_SETTING_TAG,ge as POLICY_SETTING_TAG,me as PREVIEW_INDICATOR_DESCRIPTION,xe as REQUIRE_TRUSTED_WORKSPACE_SETTING_TAG,Y as SETTINGS_EDITOR_COMMAND_CLEAR_SEARCH_RESULTS,k as SETTINGS_EDITOR_COMMAND_SHOW_CONTEXT_MENU,B as SETTINGS_EDITOR_COMMAND_SUGGEST_FILTERS,Oe as WORKSPACE_TRUST_SETTING_TAG,ye as compareTwoNullableNumbers,Ce as getExperimentalExtensionToggleData};
