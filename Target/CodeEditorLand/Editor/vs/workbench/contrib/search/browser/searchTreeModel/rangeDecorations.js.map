{
  "version": 3,
  "sources": ["../../../../../../../../../../../Dependency/Land/Dependency/Editor/Source/vs/workbench/contrib/search/browser/searchTreeModel/rangeDecorations.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IDisposable, DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { ITextModel, TrackedRangeStickiness } from '../../../../../editor/common/model.js';\nimport { ModelDecorationOptions } from '../../../../../editor/common/model/textModel.js';\nimport { IModelService } from '../../../../../editor/common/services/model.js';\nimport { Range } from '../../../../../editor/common/core/range.js';\n\n/**\n * Can add a range highlight decoration to a model.\n * It will automatically remove it when the model has its decorations changed.\n */\n\nexport class RangeHighlightDecorations implements IDisposable {\n\n\tprivate _decorationId: string | null = null;\n\tprivate _model: ITextModel | null = null;\n\tprivate readonly _modelDisposables = new DisposableStore();\n\n\tconstructor(\n\t\t@IModelService private readonly _modelService: IModelService\n\t) {\n\t}\n\n\tremoveHighlightRange() {\n\t\tif (this._model && this._decorationId) {\n\t\t\tconst decorationId = this._decorationId;\n\t\t\tthis._model.changeDecorations((accessor) => {\n\t\t\t\taccessor.removeDecoration(decorationId);\n\t\t\t});\n\t\t}\n\t\tthis._decorationId = null;\n\t}\n\n\thighlightRange(resource: URI | ITextModel, range: Range, ownerId: number = 0): void {\n\t\tlet model: ITextModel | null;\n\t\tif (URI.isUri(resource)) {\n\t\t\tmodel = this._modelService.getModel(resource);\n\t\t} else {\n\t\t\tmodel = resource;\n\t\t}\n\n\t\tif (model) {\n\t\t\tthis.doHighlightRange(model, range);\n\t\t}\n\t}\n\n\tprivate doHighlightRange(model: ITextModel, range: Range) {\n\t\tthis.removeHighlightRange();\n\t\tmodel.changeDecorations((accessor) => {\n\t\t\tthis._decorationId = accessor.addDecoration(range, RangeHighlightDecorations._RANGE_HIGHLIGHT_DECORATION);\n\t\t});\n\t\tthis.setModel(model);\n\t}\n\n\tprivate setModel(model: ITextModel) {\n\t\tif (this._model !== model) {\n\t\t\tthis.clearModelListeners();\n\t\t\tthis._model = model;\n\t\t\tthis._modelDisposables.add(this._model.onDidChangeDecorations((e) => {\n\t\t\t\tthis.clearModelListeners();\n\t\t\t\tthis.removeHighlightRange();\n\t\t\t\tthis._model = null;\n\t\t\t}));\n\t\t\tthis._modelDisposables.add(this._model.onWillDispose(() => {\n\t\t\t\tthis.clearModelListeners();\n\t\t\t\tthis.removeHighlightRange();\n\t\t\t\tthis._model = null;\n\t\t\t}));\n\t\t}\n\t}\n\n\tprivate clearModelListeners() {\n\t\tthis._modelDisposables.clear();\n\t}\n\n\tdispose() {\n\t\tif (this._model) {\n\t\t\tthis.removeHighlightRange();\n\t\t\tthis._model = null;\n\t\t}\n\t\tthis._modelDisposables.dispose();\n\t}\n\n\tprivate static readonly _RANGE_HIGHLIGHT_DECORATION = ModelDecorationOptions.register({\n\t\tdescription: 'search-range-highlight',\n\t\tstickiness: TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges,\n\t\tclassName: 'rangeHighlight',\n\t\tisWholeLine: true\n\t});\n}\n"],
  "mappings": ";;;;;;;;;;;;AAKA,SAAS,aAAa,uBAAuB;AAC7C,SAAS,WAAW;AACpB,SAAS,YAAY,8BAA8B;AACnD,SAAS,8BAA8B;AACvC,SAAS,qBAAqB;AAC9B,SAAS,aAAa;AAOf,IAAM,4BAAN,MAAuD;AAAA,EAM7D,YACiC,eAC/B;AAD+B;AAAA,EAEjC;AAAA,EA1BD,OAiB8D;AAAA;AAAA;AAAA,EAErD,gBAA+B;AAAA,EAC/B,SAA4B;AAAA,EACnB,oBAAoB,IAAI,gBAAgB;AAAA,EAOzD,uBAAuB;AACtB,QAAI,KAAK,UAAU,KAAK,eAAe;AACtC,YAAM,eAAe,KAAK;AAC1B,WAAK,OAAO,kBAAkB,CAAC,aAAa;AAC3C,iBAAS,iBAAiB,YAAY;AAAA,MACvC,CAAC;AAAA,IACF;AACA,SAAK,gBAAgB;AAAA,EACtB;AAAA,EAEA,eAAe,UAA4B,OAAc,UAAkB,GAAS;AACnF,QAAI;AACJ,QAAI,IAAI,MAAM,QAAQ,GAAG;AACxB,cAAQ,KAAK,cAAc,SAAS,QAAQ;AAAA,IAC7C,OAAO;AACN,cAAQ;AAAA,IACT;AAEA,QAAI,OAAO;AACV,WAAK,iBAAiB,OAAO,KAAK;AAAA,IACnC;AAAA,EACD;AAAA,EAEQ,iBAAiB,OAAmB,OAAc;AACzD,SAAK,qBAAqB;AAC1B,UAAM,kBAAkB,CAAC,aAAa;AACrC,WAAK,gBAAgB,SAAS,cAAc,OAAO,0BAA0B,2BAA2B;AAAA,IACzG,CAAC;AACD,SAAK,SAAS,KAAK;AAAA,EACpB;AAAA,EAEQ,SAAS,OAAmB;AACnC,QAAI,KAAK,WAAW,OAAO;AAC1B,WAAK,oBAAoB;AACzB,WAAK,SAAS;AACd,WAAK,kBAAkB,IAAI,KAAK,OAAO,uBAAuB,CAAC,MAAM;AACpE,aAAK,oBAAoB;AACzB,aAAK,qBAAqB;AAC1B,aAAK,SAAS;AAAA,MACf,CAAC,CAAC;AACF,WAAK,kBAAkB,IAAI,KAAK,OAAO,cAAc,MAAM;AAC1D,aAAK,oBAAoB;AACzB,aAAK,qBAAqB;AAC1B,aAAK,SAAS;AAAA,MACf,CAAC,CAAC;AAAA,IACH;AAAA,EACD;AAAA,EAEQ,sBAAsB;AAC7B,SAAK,kBAAkB,MAAM;AAAA,EAC9B;AAAA,EAEA,UAAU;AACT,QAAI,KAAK,QAAQ;AAChB,WAAK,qBAAqB;AAC1B,WAAK,SAAS;AAAA,IACf;AACA,SAAK,kBAAkB,QAAQ;AAAA,EAChC;AAAA,EAEA,OAAwB,8BAA8B,uBAAuB,SAAS;AAAA,IACrF,aAAa;AAAA,IACb,YAAY,uBAAuB;AAAA,IACnC,WAAW;AAAA,IACX,aAAa;AAAA,EACd,CAAC;AACF;AA7Ea,4BAAN;AAAA,EAOJ;AAAA,GAPU;",
  "names": []
}
