var c=Object.defineProperty;var l=Object.getOwnPropertyDescriptor;var s=(o,e,t,i)=>{for(var r=i>1?void 0:i?l(e,t):e,a=o.length-1,m;a>=0;a--)(m=o[a])&&(r=(i?m(e,t,r):m(r))||r);return i&&r&&c(e,t,r),r},d=(o,e)=>(t,i)=>e(t,i,o);import{KeyCode as p,KeyMod as u}from"../../../../../base/common/keyCodes.js";import{DisposableStore as h}from"../../../../../base/common/lifecycle.js";import{localize2 as f}from"../../../../../nls.js";import{InstantiationType as x,registerSingleton as I}from"../../../../../platform/instantiation/common/extensions.js";import{IInstantiationService as g}from"../../../../../platform/instantiation/common/instantiation.js";import{KeybindingWeight as T}from"../../../../../platform/keybinding/common/keybindingsRegistry.js";import"../../../terminal/browser/terminal.js";import{registerActiveInstanceAction as w}from"../../../terminal/browser/terminalActions.js";import{registerTerminalContribution as C}from"../../../terminal/browser/terminalExtensions.js";import{TerminalContextKeys as y}from"../../../terminal/common/terminalContextKey.js";import"./media/terminalQuickFix.css";import{ITerminalQuickFixService as k}from"./quickFix.js";import{TerminalQuickFixAddon as F}from"./quickFixAddon.js";import{freePort as S,gitCreatePr as b,gitFastForwardPull as v,gitPushSetUpstream as _,gitSimilar as Q,gitTwoDashes as D,pwshGeneralError as P,pwshUnixCommandNotFoundError as A}from"./terminalQuickFixBuiltinActions.js";import{TerminalQuickFixService as K}from"./terminalQuickFixService.js";I(k,K,x.Delayed);let n=class extends h{constructor(t,i){super();this._ctx=t;this._instantiationService=i}static ID="quickFix";static get(t){return t.getContribution(n.ID)}_addon;get addon(){return this._addon}xtermReady(t){this._addon=this._instantiationService.createInstance(F,void 0,this._ctx.instance.capabilities),t.raw.loadAddon(this._addon),this.add(this._addon.onDidRequestRerunCommand(i=>this._ctx.instance.runCommand(i.command,i.shouldExecute||!1)));for(const i of[D(),v(),S((r,a)=>this._ctx.instance.freePortKillProcess(r,a)),Q(),_(),b(),A(),P()])this._addon.registerCommandFinishedListener(i)}};n=s([d(1,g)],n),C(n.ID,n);var R=(e=>(e.ShowQuickFixes="workbench.action.terminal.showQuickFixes",e))(R||{});w({id:"workbench.action.terminal.showQuickFixes",title:f("workbench.action.terminal.showQuickFixes","Show Terminal Quick Fixes"),precondition:y.focus,keybinding:{primary:u.CtrlCmd|p.Period,weight:T.WorkbenchContrib},run:o=>n.get(o)?.addon?.showMenu()});
