var ze=Object.defineProperty;var qe=Object.getOwnPropertyDescriptor;var P=(v,i,t,e)=>{for(var o=e>1?void 0:e?qe(i,t):i,r=v.length-1,n;r>=0;r--)(n=v[r])&&(o=(e?n(i,t,o):n(o))||o);return e&&o&&ze(i,t,o),o},I=(v,i)=>(t,e)=>i(t,e,v);import"./media/userDataProfilesEditor.css";import{$ as l,addDisposableListener as V,append as d,clearNode as ve,Dimension as ye,EventHelper as de,EventType as z,trackFocus as $e}from"../../../../base/browser/dom.js";import{Action as U,Separator as Pe,SubmenuAction as Se}from"../../../../base/common/actions.js";import{Emitter as re,Event as pe}from"../../../../base/common/event.js";import{ThemeIcon as S}from"../../../../base/common/themables.js";import{localize as a}from"../../../../nls.js";import{IContextMenuService as fe,IContextViewService as Ee}from"../../../../platform/contextview/browser/contextView.js";import{IInstantiationService as D}from"../../../../platform/instantiation/common/instantiation.js";import{IStorageService as Ge}from"../../../../platform/storage/common/storage.js";import{ITelemetryService as Ke}from"../../../../platform/telemetry/common/telemetry.js";import{IThemeService as Qe}from"../../../../platform/theme/common/themeService.js";import{IUserDataProfilesService as _,ProfileResourceType as N}from"../../../../platform/userDataProfile/common/userDataProfile.js";import{EditorPane as je}from"../../../browser/parts/editor/editorPane.js";import"../../../common/editor.js";import{EditorInput as Ye}from"../../../common/editor/editorInput.js";import"../common/userDataProfile.js";import"../../../services/editor/common/editorGroupsService.js";import{defaultUserDataProfileIcon as Ze,IUserDataProfileManagementService as Je,IUserDataProfileService as Xe,PROFILE_FILTER as et}from"../../../services/userDataProfile/common/userDataProfile.js";import{Orientation as tt,Sizing as it,SplitView as ot}from"../../../../base/browser/ui/splitview/splitview.js";import{Button as we,ButtonBar as rt,ButtonWithDropdown as nt}from"../../../../base/browser/ui/button/button.js";import{defaultButtonStyles as ne,defaultCheckboxStyles as me,defaultInputBoxStyles as st,defaultSelectBoxStyles as at,getInputBoxStyle as lt,getListStyles as ct}from"../../../../platform/theme/browser/defaultStyles.js";import{editorBackground as C,foreground as q,registerColor as dt}from"../../../../platform/theme/common/colorRegistry.js";import{PANEL_BORDER as pt}from"../../../common/theme.js";import{WorkbenchAsyncDataTree as De,WorkbenchList as ft,WorkbenchTable as mt}from"../../../../platform/list/browser/listService.js";import{CachedListVirtualDelegate as ut}from"../../../../base/browser/ui/list/list.js";import"../../../../base/browser/ui/tree/tree.js";import"../../../../base/common/cancellation.js";import"../../../../platform/editor/common/editor.js";import{Disposable as Ce,DisposableStore as g,MutableDisposable as ht,toDisposable as ke}from"../../../../base/common/lifecycle.js";import{InputBox as It,MessageType as Le}from"../../../../base/browser/ui/inputbox/inputBox.js";import{Checkbox as ue}from"../../../../base/browser/ui/toggle/toggle.js";import{DEFAULT_ICON as he,ICONS as gt}from"../../../services/userDataProfile/common/userDataProfileIcons.js";import{WorkbenchIconSelectBox as bt}from"../../../services/userDataProfile/browser/iconSelectBox.js";import{StandardKeyboardEvent as xe}from"../../../../base/browser/keyboardEvent.js";import{KeyCode as Ie}from"../../../../base/common/keyCodes.js";import{IHoverService as Ae,WorkbenchHoverDelegate as Tt}from"../../../../platform/hover/browser/hover.js";import{HoverPosition as vt}from"../../../../base/browser/ui/hover/hoverWidget.js";import"../../../../base/browser/ui/hover/hover.js";import{SelectBox as yt}from"../../../../base/browser/ui/selectBox/selectBox.js";import{URI as $}from"../../../../base/common/uri.js";import{IEditorProgressService as Me}from"../../../../platform/progress/common/progress.js";import{isString as ge,isUndefined as se}from"../../../../base/common/types.js";import{basename as Fe}from"../../../../base/common/resources.js";import{RenderIndentGuides as He}from"../../../../base/browser/ui/tree/abstractTree.js";import{DEFAULT_LABELS_CONTAINER as Pt,ResourceLabels as St}from"../../../browser/labels.js";import"../../../../base/browser/ui/hover/hoverDelegate.js";import{IFileDialogService as Ne}from"../../../../platform/dialogs/common/dialogs.js";import{IQuickInputService as Et}from"../../../../platform/quickinput/common/quickInput.js";import{AbstractUserDataProfileElement as B,isProfileResourceChildElement as wt,isProfileResourceTypeElement as We,NewProfileElement as w,UserDataProfileElement as y,UserDataProfilesEditorModel as Dt}from"./userDataProfilesEditorModel.js";import{WorkbenchToolBar as ae}from"../../../../platform/actions/browser/toolbar.js";import{createInstantHoverDelegate as G,getDefaultHoverDelegate as Ue}from"../../../../base/browser/ui/hover/hoverDelegateFactory.js";import{Codicon as K}from"../../../../base/common/codicons.js";import{Radio as _e}from"../../../../base/browser/ui/radio/radio.js";import{MarkdownString as Ct}from"../../../../base/common/htmlContent.js";import{settingsTextInputBorder as kt}from"../../preferences/common/settingsEditorColorRegistry.js";import{renderMarkdown as Lt}from"../../../../base/browser/markdownRenderer.js";import{IUriIdentityService as Q}from"../../../../platform/uriIdentity/common/uriIdentity.js";import"../../../../base/browser/ui/table/table.js";import{ILabelService as Be}from"../../../../platform/label/common/label.js";import{Schemas as xt}from"../../../../base/common/network.js";import{posix as At,win32 as Mt}from"../../../../base/common/path.js";import{hasDriveLetter as Ft}from"../../../../base/common/extpath.js";import{normalizeDriveLetter as Re}from"../../../../base/common/labels.js";import{ActionBar as Ht}from"../../../../base/browser/ui/actionbar/actionbar.js";import{registerIcon as Oe}from"../../../../platform/theme/common/iconRegistry.js";import{DropdownMenuActionViewItem as Nt}from"../../../../base/browser/ui/dropdown/dropdownActionViewItem.js";const Wt=Oe("profiles-editor-edit-folder",K.edit,a("editIcon","Icon for the edit folder icon in the profiles editor.")),Ut=Oe("profiles-editor-remove-folder",K.close,a("removeIcon","Icon for the remove folder icon in the profiles editor.")),_t=dt("profiles.sashBorder",pt,a("profilesSashBorder","The color of the Profiles editor splitview sash border.")),be=ct({listActiveSelectionBackground:C,listActiveSelectionForeground:q,listFocusAndSelectionBackground:C,listFocusAndSelectionForeground:q,listFocusBackground:C,listFocusForeground:q,listHoverForeground:q,listHoverBackground:C,listHoverOutline:C,listFocusOutline:C,listInactiveSelectionBackground:C,listInactiveSelectionForeground:q,listInactiveFocusBackground:C,listInactiveFocusOutline:C,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0,tableOddRowsBackgroundColor:C});let O=class extends je{constructor(t,e,o,r,n,s,p,h){super(O.ID,t,e,o,r);this.quickInputService=n;this.fileDialogService=s;this.contextMenuService=p;this.instantiationService=h}static ID="workbench.editor.userDataProfiles";container;splitView;profilesList;profileWidget;model;templates=[];layout(t,e){if(this.container&&this.splitView){const o=t.height-20;this.splitView.layout(this.container?.clientWidth,o),this.splitView.el.style.height=`${o}px`}}createEditor(t){this.container=d(t,l(".profiles-editor"));const e=d(this.container,l(".sidebar-view")),o=d(e,l(".sidebar-container")),r=d(this.container,l(".contents-view")),n=d(r,l(".contents-container"));this.profileWidget=this._register(this.instantiationService.createInstance(Y,n)),this.splitView=new ot(this.container,{orientation:tt.HORIZONTAL,proportionalLayout:!0}),this.renderSidebar(o),this.splitView.addView({onDidChange:pe.None,element:e,minimumSize:200,maximumSize:350,layout:(s,p,h)=>{if(e.style.width=`${s}px`,h&&this.profilesList){const m=h-40-15;this.profilesList.getHTMLElement().style.height=`${m}px`,this.profilesList.layout(m,s)}}},300,void 0,!0),this.splitView.addView({onDidChange:pe.None,element:r,minimumSize:550,maximumSize:Number.POSITIVE_INFINITY,layout:(s,p,h)=>{r.style.width=`${s}px`,h&&this.profileWidget?.layout(new ye(s,h))}},it.Distribute,void 0,!0),this.registerListeners(),this.updateStyles()}updateStyles(){const t=this.theme.getColor(_t);this.splitView?.style({separatorBorder:t})}renderSidebar(t){this.renderNewProfileButton(d(t,l(".new-profile-button")));const e=this.instantiationService.createInstance(j),o=new Bt;this.profilesList=this._register(this.instantiationService.createInstance(ft,"ProfilesList",d(t,l(".profiles-list")),o,[e],{multipleSelectionSupport:!1,setRowLineHeight:!1,horizontalScrolling:!1,accessibilityProvider:{getAriaLabel(r){return r?.name??""},getWidgetAriaLabel(){return a("profiles","Profiles")}},openOnSingleClick:!0,identityProvider:{getId(r){return r instanceof y?r.profile.id:r.name}},alwaysConsumeMouseWheel:!1}))}renderNewProfileButton(t){const e=this._register(new nt(t,{actions:{getActions:()=>{const o=[];return this.templates.length&&(o.push(new Se("from.template",a("from template","From Template"),this.getCreateFromTemplateActions())),o.push(new Pe)),o.push(new U("importProfile",a("importProfile","Import Profile..."),void 0,!0,()=>this.importProfile())),o}},addPrimaryActionToDropdown:!1,contextMenuProvider:this.contextMenuService,supportIcons:!0,...ne}));e.label=a("newProfile","New Profile"),this._register(e.onDidClick(o=>this.createNewProfile()))}getCreateFromTemplateActions(){return this.templates.map(t=>new U(`template:${t.url}`,t.name,void 0,!0,()=>this.createNewProfile($.parse(t.url))))}registerListeners(){this.profilesList&&(this._register(this.profilesList.onDidChangeSelection(t=>{const[e]=t.elements;e instanceof B&&this.profileWidget?.render(e)})),this._register(this.profilesList.onContextMenu(t=>{const e=[];t.element||e.push(...this.getTreeContextMenuActions()),t.element instanceof B&&e.push(...t.element.actions[1]),e.length&&this.contextMenuService.showContextMenu({getAnchor:()=>t.anchor,getActions:()=>e,getActionsContext:()=>t.element})})),this._register(this.profilesList.onMouseDblClick(t=>{t.element||this.createNewProfile()})))}getTreeContextMenuActions(){const t=[];t.push(new U("newProfile",a("newProfile","New Profile"),void 0,!0,()=>this.createNewProfile()));const e=this.getCreateFromTemplateActions();return e.length&&t.push(new Se("from.template",a("new from template","New Profile From Template"),e)),t.push(new Pe),t.push(new U("importProfile",a("importProfile","Import Profile..."),void 0,!0,()=>this.importProfile())),t}async importProfile(){const t=new g,e=t.add(this.quickInputService.createQuickPick()),o=r=>{const n=[];r&&n.push({label:e.value,description:a("import from url","Import from URL")}),n.push({label:a("import from file","Select File...")}),e.items=n};e.title=a("import profile quick pick title","Import from Profile Template..."),e.placeholder=a("import profile placeholder","Provide Profile Template URL"),e.ignoreFocusOut=!0,t.add(e.onDidChangeValue(o)),o(),e.matchOnLabel=!1,e.matchOnDescription=!1,t.add(e.onDidAccept(async()=>{e.hide();const r=e.selectedItems[0];if(!r)return;const n=r.label===e.value?$.parse(e.value):await this.getProfileUriFromFileSystem();n&&this.createNewProfile(n)})),t.add(e.onDidHide(()=>t.dispose())),e.show()}async createNewProfile(t){await this.model?.createNewProfile(t)}selectProfile(t){const e=this.model?.profiles.findIndex(o=>o instanceof y&&o.profile.id===t.id);e!==void 0&&e>=0&&this.profilesList?.setSelection([e])}async getProfileUriFromFileSystem(){const t=await this.fileDialogService.showOpenDialog({canSelectFolders:!1,canSelectFiles:!0,canSelectMany:!1,filters:et,title:a("import profile dialog","Select Profile Template File")});return t?t[0]:null}async setInput(t,e,o,r){await super.setInput(t,e,o,r),this.model=await t.resolve(),this.model.getTemplates().then(n=>{this.templates=n,this.profileWidget&&(this.profileWidget.templates=n)}),this.updateProfilesList(),this._register(this.model.onDidChange(n=>this.updateProfilesList(n)))}focus(){super.focus(),this.profilesList?.domFocus()}updateProfilesList(t){if(!this.model)return;const e=this.profilesList?.getSelection()?.[0],o=e!==void 0?this.profilesList?.element(e):void 0;if(this.profilesList?.splice(0,this.profilesList.length,this.model.profiles),t)this.profilesList?.setSelection([this.model.profiles.indexOf(t)]);else if(o){if(!this.model.profiles.includes(o)){const r=this.model.profiles.find(n=>n.name===o.name)??this.model.profiles[0];r&&this.profilesList?.setSelection([this.model.profiles.indexOf(r)])}}else{const r=this.model.profiles.find(n=>n.active)??this.model.profiles[0];r&&this.profilesList?.setSelection([this.model.profiles.indexOf(r)])}}};O=P([I(1,Ke),I(2,Qe),I(3,Ge),I(4,Et),I(5,Ne),I(6,fe),I(7,D)],O);class Bt{getHeight(i){return 22}getTemplateId(){return"profileListElement"}}let j=class{constructor(i){this.instantiationService=i}templateId="profileListElement";renderTemplate(i){const t=new g,e=new g;i.classList.add("profile-list-item");const o=d(i,l(".profile-list-item-icon")),r=d(i,l(".profile-list-item-label")),n=d(i,l(`span${S.asCSSSelector(K.circleFilled)}`)),s=d(i,l(".profile-list-item-description"));d(s,l(`span${S.asCSSSelector(K.check)}`),l("span",void 0,a("activeProfile","Active")));const p=d(i,l(".profile-tree-item-actions-container")),h=t.add(this.instantiationService.createInstance(ae,p,{hoverDelegate:t.add(G()),highlightToggledItems:!0}));return{label:r,icon:o,dirty:n,description:s,actionBar:h,disposables:t,elementDisposables:e}}renderElement(i,t,e,o){e.elementDisposables.clear(),e.label.textContent=i.name,e.label.classList.toggle("new-profile",i instanceof w),e.icon.className=S.asClassName(i.icon?S.fromId(i.icon):he),e.dirty.classList.toggle("hide",!(i instanceof w)),e.description.classList.toggle("hide",!i.active),e.elementDisposables.add(i.onDidChange(s=>{s.name&&(e.label.textContent=i.name),s.icon&&(i.icon?e.icon.className=S.asClassName(S.fromId(i.icon)):e.icon.className="hide"),s.active&&e.description.classList.toggle("hide",!i.active)}));const r=()=>e.actionBar.setActions(i.actions[0].filter(s=>s.enabled),i.actions[1].filter(s=>s.enabled));r();const n=[];for(const s of i.actions.flat())s instanceof U&&n.push(s.onDidChange);e.elementDisposables.add(pe.any(...n)(s=>{s.enabled!==void 0&&r()}))}disposeElement(i,t,e,o){e.elementDisposables.clear()}disposeTemplate(i){i.disposables.dispose(),i.elementDisposables.dispose()}};j=P([I(0,D)],j);let Y=class extends Ce{constructor(t,e,o){super();this.editorProgressService=e;this.instantiationService=o;const r=d(t,l(".profile-header")),n=d(r,l(".profile-title-container"));this.profileTitle=d(n,l(""));const s=d(t,l(".profile-body")),p=new Rt,h=this._register(this.instantiationService.createInstance(ie)),m=this._register(this.instantiationService.createInstance(oe));this.layoutParticipants.push(m),this.copyFromProfileRenderer=this._register(this.instantiationService.createInstance(te)),this.profileTreeContainer=d(s,l(".profile-tree")),this.profileTree=this._register(this.instantiationService.createInstance(De,"ProfileEditor-Tree",this.profileTreeContainer,p,[this._register(this.instantiationService.createInstance(J)),this._register(this.instantiationService.createInstance(X)),this._register(this.instantiationService.createInstance(ee)),this._register(this.instantiationService.createInstance(zt)),this.copyFromProfileRenderer,h,m],this.instantiationService.createInstance(Ot),{multipleSelectionSupport:!1,horizontalScrolling:!1,accessibilityProvider:{getAriaLabel(c){return c?.element??""},getWidgetAriaLabel(){return""}},identityProvider:{getId(c){return c.element}},expandOnlyOnTwistieClick:!0,renderIndentGuides:He.None,enableStickyScroll:!1,openOnSingleClick:!1,setRowLineHeight:!1,supportDynamicHeights:!0,alwaysConsumeMouseWheel:!1})),this.profileTree.style(be),this._register(h.onDidChangeContentHeight(c=>this.profileTree.updateElementHeight(c,void 0))),this._register(m.onDidChangeContentHeight(c=>this.profileTree.updateElementHeight(c,void 0))),this._register(h.onDidChangeSelection(c=>{c.selected&&(this.profileTree.setFocus([]),this.profileTree.setSelection([]))})),this._register(this.profileTree.onDidChangeContentHeight(c=>{this.dimension&&this.layout(this.dimension)})),this._register(this.profileTree.onDidChangeSelection(c=>{c.elements.length&&h.clearSelection()})),this.buttonContainer=d(s,l(".profile-row-container.profile-button-container"))}profileTitle;profileTreeContainer;buttonContainer;profileTree;copyFromProfileRenderer;_profileElement=this._register(new ht);layoutParticipants=[];set templates(t){this.copyFromProfileRenderer.setTemplates(t),this.profileTree.rerender()}dimension;layout(t){this.dimension=t;const e=this.profileTree.contentHeight,o=Math.min(e,t.height-(this._profileElement.value?.element instanceof w?116:54));this.profileTreeContainer.style.height=`${o}px`,this.profileTree.layout(o,t.width);for(const r of this.layoutParticipants)r.layout()}render(t){if(this._profileElement.value?.element===t)return;this._profileElement.value?.element instanceof y&&this._profileElement.value.element.reset(),this.profileTree.setInput(t);const e=new g;this._profileElement.value={element:t,dispose:()=>e.dispose()},this.profileTitle.textContent=t.name,e.add(t.onDidChange(n=>{n.name&&(this.profileTitle.textContent=t.name)}));const[o,r]=t.titleButtons;if(o?.length||r?.length){if(this.buttonContainer.classList.remove("hide"),r?.length)for(const n of r){const s=e.add(new we(this.buttonContainer,{...ne,secondary:!0}));s.label=n.label,s.enabled=n.enabled,e.add(s.onDidClick(()=>this.editorProgressService.showWhile(n.run()))),e.add(n.onDidChange(p=>{se(p.enabled)||(s.enabled=n.enabled),se(p.label)||(s.label=n.label)}))}if(o?.length)for(const n of o){const s=e.add(new we(this.buttonContainer,{...ne}));s.label=n.label,s.enabled=n.enabled,e.add(s.onDidClick(()=>this.editorProgressService.showWhile(n.run()))),e.add(n.onDidChange(p=>{se(p.enabled)||(s.enabled=n.enabled),se(p.label)||(s.label=n.label)})),e.add(t.onDidChange(p=>{p.message&&(s.setTitle(t.message??n.label),s.element.classList.toggle("error",!!t.message))}))}}else this.buttonContainer.classList.add("hide");t instanceof w&&this.profileTree.focusFirst(),this.dimension&&this.layout(this.dimension)}};Y=P([I(1,Me),I(2,D)],Y);class Rt extends ut{getTemplateId({element:i}){return i}hasDynamicHeight({element:i}){return i==="contents"||i==="workspaces"}estimateHeight({element:i,root:t}){switch(i){case"name":return 72;case"icon":return 68;case"copyFrom":return 90;case"useForCurrent":case"useAsDefault":return 68;case"contents":return 258;case"workspaces":return(t.workspaces?t.workspaces.length*24+30:0)+112}}}class Ot{hasChildren(i){return i instanceof B}async getChildren(i){if(i instanceof B){const t=[];return i instanceof w?(t.push({element:"name",root:i}),t.push({element:"icon",root:i}),t.push({element:"copyFrom",root:i}),t.push({element:"contents",root:i})):i instanceof y&&(i.profile.isDefault||(t.push({element:"name",root:i}),t.push({element:"icon",root:i})),t.push({element:"useAsDefault",root:i}),t.push({element:"contents",root:i}),t.push({element:"workspaces",root:i})),t}return[]}}class Vt{getTemplateId(i){return i.element.resourceType?i.root instanceof w?L.TEMPLATE_ID:k.TEMPLATE_ID:x.TEMPLATE_ID}getHeight(i){return 24}}let Z=class{constructor(i){this.editorProgressService=i}hasChildren(i){if(i instanceof B)return!0;if(i.element.resourceType){if(i.element.resourceType!==N.Extensions&&i.element.resourceType!==N.Snippets)return!1;if(i.root instanceof w){const t=i.element.resourceType;if(i.root.getFlag(t))return!0;if(!i.root.hasResource(t)||i.root.copyFrom===void 0||!i.root.getCopyFlag(t))return!1}return!0}return!1}async getChildren(i){if(i instanceof B)return(await i.getChildren()).map(e=>({element:e,root:i}));if(i.element.resourceType){const t=this.editorProgressService.show(!0,500);try{return(await i.root.getChildren(i.element.resourceType)).map(o=>({element:o,root:i.root}))}finally{t.done()}}return[]}};Z=P([I(0,Me)],Z);class le extends Ce{getResourceTypeTitle(i){switch(i){case N.Settings:return a("settings","Settings");case N.Keybindings:return a("keybindings","Keyboard Shortcuts");case N.Snippets:return a("snippets","Snippets");case N.Tasks:return a("tasks","Tasks");case N.Extensions:return a("extensions","Extensions")}return""}disposeElement(i,t,e,o){e.elementDisposables.clear()}disposeTemplate(i){i.disposables.dispose()}}class W extends le{renderElement({element:i},t,e,o){e.elementDisposables.clear(),e.element=i}}let J=class extends W{constructor(t,e){super();this.userDataProfilesService=t;this.contextViewService=e}templateId="name";renderTemplate(t){const e=new g,o=e.add(new g);let r;const n=d(t,l(".profile-row-container"));d(n,l(".profile-label-element",void 0,a("name","Name")));const s=e.add(new It(n,this.contextViewService,{inputBoxStyles:lt({inputBorder:kt}),ariaLabel:a("profileName","Profile Name"),placeholder:a("profileName","Profile Name"),validationOptions:{validation:m=>{if(!m)return{content:a("name required","Profile name is required and must be a non-empty value."),type:Le.WARNING};if(r?.root.disabled||!r?.root.shouldValidateName())return null;const c=r?.root.getInitialName();return m=m.trim(),c!==m&&this.userDataProfilesService.profiles.some(b=>!b.isTransient&&b.name===m)?{content:a("profileExists","Profile with name {0} already exists.",m),type:Le.WARNING}:null}}}));s.onDidChange(m=>{r&&m&&(r.root.name=m)});const p=e.add($e(s.inputElement));e.add(p.onDidBlur(()=>{r&&!s.value&&(s.value=r.root.name)}));const h=m=>{s.value=m.root.name,s.validate();const c=m.root instanceof y&&m.root.profile.isDefault;m.root.disabled||c?s.disable():s.enable(),c?s.setTooltip(a("defaultProfileName","Name cannot be changed for the default profile")):s.setTooltip(a("profileName","Profile Name"))};return{set element(m){r=m,h(r),o.add(r.root.onDidChange(c=>{(c.name||c.disabled)&&h(m),c.profile&&s.validate()}))},disposables:e,elementDisposables:o}}};J=P([I(0,_),I(1,Ee)],J);let X=class extends W{constructor(t,e){super();this.instantiationService=t;this.hoverService=e;this.hoverDelegate=Ue("element")}templateId="icon";hoverDelegate;renderTemplate(t){const e=new g,o=e.add(new g);let r;const n=d(t,l(".profile-row-container"));d(n,l(".profile-label-element",void 0,a("icon-label","Icon")));const s=d(n,l(".profile-icon-container")),p=d(s,l(`${S.asCSSSelector(he)}`,{tabindex:"0",role:"button","aria-label":a("icon","Profile Icon")})),h=e.add(this.hoverService.setupManagedHover(this.hoverDelegate,p,"")),m=e.add(this.instantiationService.createInstance(bt,{icons:gt,inputBoxStyles:st}));let c;const b=()=>{r?.root instanceof y&&r.root.profile.isDefault||r?.root.disabled||r?.root instanceof y&&r.root.profile.isDefault||(m.clearInput(),c=this.hoverService.showHover({content:m.domNode,target:p,position:{hoverPosition:vt.BELOW},persistence:{sticky:!0},appearance:{showPointer:!0}},!0),c&&(m.layout(new ye(486,292)),m.focus()))};e.add(V(p,z.CLICK,f=>{de.stop(f,!0),b()})),e.add(V(p,z.KEY_DOWN,f=>{const u=new xe(f);(u.equals(Ie.Enter)||u.equals(Ie.Space))&&(de.stop(u,!0),b())})),e.add(V(m.domNode,z.KEY_DOWN,f=>{const u=new xe(f);u.equals(Ie.Escape)&&(de.stop(u,!0),c?.dispose(),p.focus())})),e.add(m.onDidSelect(f=>{c?.dispose(),p.focus(),r&&(r.root.icon=f.id)})),d(s,l(".profile-description-element",void 0,a("icon-description","Profile icon to be shown in the activity bar")));const T=f=>{f?.root instanceof y&&f.root.profile.isDefault?(s.classList.add("disabled"),h.update(a("defaultProfileIcon","Icon cannot be changed for the default profile"))):(h.update(a("changeIcon","Click to change icon")),s.classList.remove("disabled")),f.root.icon?p.className=S.asClassName(S.fromId(f.root.icon)):p.className=S.asClassName(S.fromId(he.id))};return{set element(f){r=f,T(r),o.add(r.root.onDidChange(u=>{u.icon&&T(f)}))},disposables:e,elementDisposables:o}}};X=P([I(0,D),I(1,Ae)],X);let ee=class extends W{constructor(t){super();this.userDataProfileService=t}templateId="useForCurrent";renderTemplate(t){const e=new g,o=e.add(new g);let r;const n=d(t,l(".profile-row-container"));d(n,l(".profile-label-element",void 0,a("use for curren window","Use for Current Window")));const s=d(n,l(".profile-use-for-current-container")),p=a("enable for current window","Use this profile for the current window"),h=e.add(new ue(p,!1,me));d(s,h.domNode);const m=d(s,l(".profile-description-element",void 0,p));e.add(h.onChange(()=>{r?.root instanceof y&&r.root.toggleCurrentWindowProfile()})),e.add(V(m,z.CLICK,()=>{r?.root instanceof y&&r.root.toggleCurrentWindowProfile()}));const c=T=>{h.checked=T.root instanceof y&&this.userDataProfileService.currentProfile.id===T.root.profile.id,h.checked&&this.userDataProfileService.currentProfile.isDefault?h.disable():h.enable()},b=this;return{set element(T){r=T,c(r),o.add(b.userDataProfileService.onDidChangeCurrentProfile(f=>{c(T)}))},disposables:e,elementDisposables:o}}};ee=P([I(0,Xe)],ee);class zt extends W{templateId="useAsDefault";renderTemplate(i){const t=new g,e=t.add(new g);let o;const r=d(i,l(".profile-row-container"));d(r,l(".profile-label-element",void 0,a("use for new windows","Use for New Windows")));const n=d(r,l(".profile-use-as-default-container")),s=a("enable for new windows","Use this profile as the default for new windows"),p=t.add(new ue(s,!1,me));d(n,p.domNode);const h=d(n,l(".profile-description-element",void 0,s));t.add(p.onChange(()=>{o?.root instanceof y&&o.root.toggleNewWindowProfile()})),t.add(V(h,z.CLICK,()=>{o?.root instanceof y&&o.root.toggleNewWindowProfile()}));const m=c=>{p.checked=c.root instanceof y&&c.root.isNewWindowProfile};return{set element(c){o=c,m(o),e.add(o.root.onDidChange(b=>{b.newWindowProfile&&m(c)}))},disposables:t,elementDisposables:e}}}let te=class extends W{constructor(t,e,o,r){super();this.userDataProfilesService=t;this.instantiationService=e;this.uriIdentityService=o;this.contextViewService=r}templateId="copyFrom";templates=[];renderTemplate(t){const e=new g,o=e.add(new g);let r;const n=d(t,l(".profile-row-container.profile-copy-from-container"));d(n,l(".profile-label-element",void 0,a("create from","Copy from"))),d(n,l(".profile-description-element",void 0,a("copy from description","Select the profile source from which you want to copy contents")));const s=e.add(this.instantiationService.createInstance(yt,[],0,this.contextViewService,at,{useCustomDrawn:!0,ariaLabel:a("copy profile from","Copy profile from")}));s.render(d(n,l(".profile-select-container")));const p=(m,c)=>{s.setOptions(c);const b=m.copyFrom instanceof $?m.copyFrom.toString():m.copyFrom?.id,T=b?c.findIndex(f=>f.id===b):0;s.select(T)},h=this;return{set element(m){if(r=m,r.root instanceof w){const c=r.root;let b=h.getCopyFromOptions(c);p(c,b),s.setEnabled(!c.previewProfile&&!c.disabled),o.add(r.root.onDidChange(T=>{(T.copyFrom||T.copyFromInfo)&&(b=h.getCopyFromOptions(c),p(c,b)),(T.preview||T.disabled)&&s.setEnabled(!c.previewProfile&&!c.disabled)})),o.add(s.onDidSelect(T=>{c.copyFrom=b[T.index].source}))}},disposables:e,elementDisposables:o}}setTemplates(t){this.templates=t}getCopyFromOptions(t){const e={text:"\u2500\u2500\u2500\u2500\u2500\u2500",isDisabled:!0},o=[];o.push({text:a("empty profile","None")});for(const[r,n]of t.copyFromTemplates)this.templates.some(s=>this.uriIdentityService.extUri.isEqual($.parse(s.url),r))||o.push({text:`${n} (${Fe(r)})`,id:r.toString(),source:r});if(this.templates.length){o.push({...e,decoratorRight:a("from templates","Profile Templates")});for(const r of this.templates)o.push({text:r.name,id:r.url,source:$.parse(r.url)})}o.push({...e,decoratorRight:a("from existing profiles","Existing Profiles")});for(const r of this.userDataProfilesService.profiles)r.isTransient||o.push({text:r.name,id:r.id,source:r});return o}};te=P([I(0,_),I(1,D),I(2,Q),I(3,Ee)],te);let ie=class extends W{constructor(t,e,o){super();this.userDataProfilesService=t;this.contextMenuService=e;this.instantiationService=o}templateId="contents";_onDidChangeContentHeight=this._register(new re);onDidChangeContentHeight=this._onDidChangeContentHeight.event;_onDidChangeSelection=this._register(new re);onDidChangeSelection=this._onDidChangeSelection.event;profilesContentTree;renderTemplate(t){const e=new g,o=e.add(new g);let r;const n=d(t,l(".profile-row-container"));d(n,l(".profile-label-element",void 0,a("contents","Contents")));const s=d(n,l(".profile-description-element")),p=d(n,l(".profile-content-tree-header")),h=l(".options-header",void 0,l("span",void 0,a("options","Source")));d(p,l(""),l("",void 0,a("contents","Contents")),h,l(""));const m=new Vt,c=this.profilesContentTree=e.add(this.instantiationService.createInstance(De,"ProfileEditor-ContentsTree",d(n,l(".profile-content-tree.file-icon-themable-tree.show-file-icons")),m,[this.instantiationService.createInstance(k),this.instantiationService.createInstance(L),this.instantiationService.createInstance(x)],this.instantiationService.createInstance(Z),{multipleSelectionSupport:!1,horizontalScrolling:!1,accessibilityProvider:{getAriaLabel(f){return(f?.element).resourceType?(f?.element).resourceType:(f?.element).label?(f?.element).label:""},getWidgetAriaLabel(){return""}},identityProvider:{getId(f){return f?.element.handle?f.element.handle:""}},expandOnlyOnTwistieClick:!0,renderIndentGuides:He.None,enableStickyScroll:!1,openOnSingleClick:!1,alwaysConsumeMouseWheel:!1}));this.profilesContentTree.style(be),e.add(ke(()=>this.profilesContentTree=void 0)),e.add(this.profilesContentTree.onDidChangeContentHeight(f=>{this.profilesContentTree?.layout(f),r&&this._onDidChangeContentHeight.fire(r)})),e.add(this.profilesContentTree.onDidChangeSelection(f=>{r&&this._onDidChangeSelection.fire({element:r,selected:!!f.elements.length})})),e.add(this.profilesContentTree.onDidOpen(async f=>{f.browserEvent&&f.element?.element.openAction&&await f.element.element.openAction.run()})),e.add(this.profilesContentTree.onContextMenu(async f=>{f.element?.element.actions?.contextMenu?.length&&this.contextMenuService.showContextMenu({getAnchor:()=>f.anchor,getActions:()=>f.element?.element?.actions?.contextMenu??[],getActionsContext:()=>f.element})}));const b=f=>{ve(s);const u=new Ct;if(f.root instanceof y&&f.root.profile.isDefault)u.appendMarkdown(a("default profile contents description",`Browse contents of this profile
`));else if(u.appendMarkdown(a("contents source description",`Configure source of contents for this profile
`)),f.root instanceof w){const E=f.root.getCopyFromName(),Te=E===this.userDataProfilesService.defaultProfile.name?a("copy from default","{0} (Copy)",E):E;Te&&u.appendMarkdown(a("copy info",`- *{0}:* Copy contents from the {1} profile
`,Te,E)),u.appendMarkdown(a("default info",`- *Default:* Use contents from the Default profile
`)).appendMarkdown(a("none info",`- *None:* Create empty contents
`))}d(s,o.add(Lt(u)).element)},T=this;return{set element(f){r=f,b(f),f.root instanceof w?p.classList.remove("default-profile"):f.root instanceof y&&p.classList.toggle("default-profile",f.root.profile.isDefault),c.setInput(r.root),o.add(r.root.onDidChange(u=>{(u.copyFrom||u.copyFlags||u.flags||u.extensions||u.snippets||u.preview)&&c.updateChildren(f.root),u.copyFromInfo&&(b(f),T._onDidChangeContentHeight.fire(f))}))},disposables:e,elementDisposables:new g}}clearSelection(){this.profilesContentTree&&(this.profilesContentTree.setSelection([]),this.profilesContentTree.setFocus([]))}};ie=P([I(0,_),I(1,fe),I(2,D)],ie);let oe=class extends W{constructor(t,e,o,r){super();this.labelService=t;this.uriIdentityService=e;this.fileDialogService=o;this.instantiationService=r}templateId="workspaces";_onDidChangeContentHeight=this._register(new re);onDidChangeContentHeight=this._onDidChangeContentHeight.event;_onDidChangeSelection=this._register(new re);onDidChangeSelection=this._onDidChangeSelection.event;workspacesTable;renderTemplate(t){const e=new g,o=e.add(new g);let r;const n=d(t,l(".profile-row-container"));d(n,l(".profile-label-element",void 0,a("folders_workspaces","Folders & Workspaces")));const s=d(n,l(".profile-description-element")),p=d(n,l(".profile-associations-table")),h=this.workspacesTable=e.add(this.instantiationService.createInstance(mt,"ProfileEditor-AssociationsTable",p,new class{headerRowHeight=30;getHeight(){return 24}},[{label:"",tooltip:"",weight:1,minimumWidth:30,maximumWidth:30,templateId:ce.TEMPLATE_ID,project(u){return u}},{label:a("hostColumnLabel","Host"),tooltip:"",weight:2,templateId:A.TEMPLATE_ID,project(u){return u}},{label:a("pathColumnLabel","Path"),tooltip:"",weight:7,templateId:M.TEMPLATE_ID,project(u){return u}},{label:"",tooltip:"",weight:1,minimumWidth:84,maximumWidth:84,templateId:F.TEMPLATE_ID,project(u){return u}}],[new ce,this.instantiationService.createInstance(A),this.instantiationService.createInstance(M),this.instantiationService.createInstance(F)],{horizontalScrolling:!1,alwaysConsumeMouseWheel:!1,openOnSingleClick:!1,multipleSelectionSupport:!1,accessibilityProvider:{getAriaLabel:u=>{const E=Ve(this.labelService,u.workspace);return E===void 0||E.length===0?a("trustedFolderAriaLabel","{0}, trusted",this.labelService.getUriLabel(u.workspace)):a("trustedFolderWithHostAriaLabel","{0} on {1}, trusted",this.labelService.getUriLabel(u.workspace),E)},getWidgetAriaLabel:()=>a("trustedFoldersAndWorkspaces","Trusted Folders & Workspaces")},identityProvider:{getId(u){return u.workspace.toString()}}}));this.workspacesTable.style(be),e.add(ke(()=>this.workspacesTable=void 0)),e.add(this.workspacesTable.onDidChangeSelection(u=>{r&&this._onDidChangeSelection.fire({element:r,selected:!!u.elements.length})}));const m=d(n,l(".profile-workspaces-button-container")),c=e.add(new rt(m)),b=this._register(c.addButton({title:a("addButton","Add Folder"),...ne}));b.label=a("addButton","Add Folder"),e.add(b.onDidClick(async()=>{const u=await this.fileDialogService.showOpenDialog({canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!0,openLabel:a("addFolder","Add Folder"),title:a("addFolderTitle","Select Folders To Add")});u&&r?.root instanceof y&&r.root.updateWorkspaces(u,[])})),e.add(h.onDidOpen(u=>{u?.element&&u.element.profileElement.openWorkspace(u.element.workspace)}));const T=()=>{r?.root instanceof y&&r.root.workspaces?.length?(s.textContent=a("folders_workspaces_description","Following folders and workspaces are using this profile"),p.classList.remove("hide"),h.splice(0,h.length,r.root.workspaces.map(u=>({workspace:u,profileElement:r.root})).sort((u,E)=>this.uriIdentityService.extUri.compare(u.workspace,E.workspace))),this.layout()):(s.textContent=a("no_folder_description","No folders or workspaces are using this profile"),p.classList.add("hide"))},f=this;return{set element(u){r=u,u.root instanceof y&&T(),o.add(r.root.onDidChange(E=>{r&&E.workspaces&&(T(),f._onDidChangeContentHeight.fire(r))}))},disposables:e,elementDisposables:new g}}layout(){this.workspacesTable&&this.workspacesTable.layout(this.workspacesTable.length*24+30,void 0)}clearSelection(){this.workspacesTable&&(this.workspacesTable.setSelection([]),this.workspacesTable.setFocus([]))}};oe=P([I(0,Be),I(1,Q),I(2,Ne),I(3,D)],oe);let k=class extends le{constructor(t){super();this.instantiationService=t}static TEMPLATE_ID="ExistingProfileResourceTemplate";templateId=k.TEMPLATE_ID;renderTemplate(t){const e=new g,o=d(t,l(".profile-tree-item-container.existing-profile-resource-type-container")),r=d(o,l(".profile-resource-type-label")),n=e.add(new _e({items:[]}));d(d(o,l(".profile-resource-options-container")),n.domNode);const s=d(o,l(".profile-resource-actions-container")),p=e.add(this.instantiationService.createInstance(ae,s,{hoverDelegate:e.add(G()),highlightToggledItems:!0}));return{label:r,radio:n,actionBar:p,disposables:e,elementDisposables:e.add(new g)}}renderElement({element:t},e,o,r){o.elementDisposables.clear();const{element:n,root:s}=t;if(!(s instanceof y))throw new Error("ExistingProfileResourceTreeRenderer can only render existing profile element");if(ge(n)||!We(n))throw new Error("Invalid profile resource element");const p=()=>{o.radio.setItems([{text:a("default","Default"),tooltip:a("default description","Use {0} from the Default profile",h),isActive:s.getFlag(n.resourceType)},{text:s.name,tooltip:a("current description","Use {0} from the {1} profile",h,s.name),isActive:!s.getFlag(n.resourceType)}])},h=this.getResourceTypeTitle(n.resourceType);o.label.textContent=h,s instanceof y&&s.profile.isDefault?o.radio.domNode.classList.add("hide"):(o.radio.domNode.classList.remove("hide"),p(),o.elementDisposables.add(s.onDidChange(c=>{c.name&&p()})),o.elementDisposables.add(o.radio.onDidSelect(c=>s.setFlag(n.resourceType,c===0))));const m=[];n.openAction&&m.push(n.openAction),n.actions?.primary&&m.push(...n.actions.primary),o.actionBar.setActions(m)}};k=P([I(0,D)],k);let L=class extends le{constructor(t,e){super();this.userDataProfilesService=t;this.instantiationService=e}static TEMPLATE_ID="NewProfileResourceTemplate";templateId=L.TEMPLATE_ID;renderTemplate(t){const e=new g,o=d(t,l(".profile-tree-item-container.new-profile-resource-type-container")),r=d(o,l(".profile-resource-type-label-container")),n=d(r,l("span.profile-resource-type-label")),s=e.add(new _e({items:[]}));d(d(o,l(".profile-resource-options-container")),s.domNode);const p=d(o,l(".profile-resource-actions-container")),h=e.add(this.instantiationService.createInstance(ae,p,{hoverDelegate:e.add(G()),highlightToggledItems:!0}));return{label:n,radio:s,actionBar:h,disposables:e,elementDisposables:e.add(new g)}}renderElement({element:t},e,o,r){o.elementDisposables.clear();const{element:n,root:s}=t;if(!(s instanceof w))throw new Error("NewProfileResourceTreeRenderer can only render new profile element");if(ge(n)||!We(n))throw new Error("Invalid profile resource element");const p=this.getResourceTypeTitle(n.resourceType);o.label.textContent=p;const h=()=>{const c=[{text:a("default","Default"),tooltip:a("default description","Use {0} from the Default profile",p)},{text:a("none","None"),tooltip:a("none description","Create empty {0}",p)}],b=s.getCopyFromName(),T=b===this.userDataProfilesService.defaultProfile.name?a("copy from default","{0} (Copy)",b):b;s.copyFrom&&T?(o.radio.setItems([{text:T,tooltip:T?a("copy from profile description","Copy {0} from the {1} profile",p,T):a("copy description","Copy")},...c]),o.radio.setActiveItem(s.getCopyFlag(n.resourceType)?0:s.getFlag(n.resourceType)?1:2)):(o.radio.setItems(c),o.radio.setActiveItem(s.getFlag(n.resourceType)?0:1))};s.copyFrom?o.elementDisposables.add(o.radio.onDidSelect(c=>{s.setFlag(n.resourceType,c===1),s.setCopyFlag(n.resourceType,c===0)})):o.elementDisposables.add(o.radio.onDidSelect(c=>{s.setFlag(n.resourceType,c===0)})),h(),o.radio.setEnabled(!s.disabled&&!s.previewProfile),o.elementDisposables.add(s.onDidChange(c=>{(c.disabled||c.preview)&&o.radio.setEnabled(!s.disabled&&!s.previewProfile),(c.copyFrom||c.copyFromInfo)&&h()}));const m=[];n.openAction&&m.push(n.openAction),n.actions?.primary&&m.push(...n.actions.primary),o.actionBar.setActions(m)}};L=P([I(0,_),I(1,D)],L);let x=class extends le{constructor(t){super();this.instantiationService=t;this.labels=t.createInstance(St,Pt),this.hoverDelegate=this._register(t.createInstance(Tt,"mouse",!1,{}))}static TEMPLATE_ID="ProfileResourceChildTreeItemTemplate";templateId=x.TEMPLATE_ID;labels;hoverDelegate;renderTemplate(t){const e=new g,o=d(t,l(".profile-tree-item-container.profile-resource-child-container")),r=e.add(new ue("",!1,me));d(o,r.domNode);const n=e.add(this.labels.create(o,{hoverDelegate:this.hoverDelegate})),s=d(o,l(".profile-resource-actions-container")),p=e.add(this.instantiationService.createInstance(ae,s,{hoverDelegate:e.add(G()),highlightToggledItems:!0}));return{checkbox:r,resourceLabel:n,actionBar:p,disposables:e,elementDisposables:e.add(new g)}}renderElement({element:t},e,o,r){o.elementDisposables.clear();const{element:n}=t;if(ge(n)||!wt(n))throw new Error("Invalid profile resource element");n.checkbox?(o.checkbox.domNode.setAttribute("tabindex","0"),o.checkbox.domNode.classList.remove("hide"),o.checkbox.checked=n.checkbox.isChecked,o.checkbox.domNode.ariaLabel=n.checkbox.accessibilityInformation?.label??"",n.checkbox.accessibilityInformation?.role&&(o.checkbox.domNode.role=n.checkbox.accessibilityInformation.role)):(o.checkbox.domNode.removeAttribute("tabindex"),o.checkbox.domNode.classList.add("hide")),o.resourceLabel.setResource({name:n.resource?Fe(n.resource):n.label,description:n.description,resource:n.resource},{forceLabel:!0,icon:n.icon,hideIcon:!n.resource&&!n.icon});const s=[];n.openAction&&s.push(n.openAction),n.actions?.primary&&s.push(...n.actions.primary),o.actionBar.setActions(s)}};x=P([I(0,D)],x);class ce{static TEMPLATE_ID="empty";templateId=ce.TEMPLATE_ID;renderTemplate(i){return{}}renderElement(i,t,e,o){}disposeTemplate(){}}let A=class{constructor(i,t){this.uriIdentityService=i;this.labelService=t}static TEMPLATE_ID="host";templateId=A.TEMPLATE_ID;renderTemplate(i){const t=new g,e=t.add(new g),o=i.appendChild(l(".host")),r=o.appendChild(l("div.host-label")),n=o.appendChild(l("div.button-bar"));return{element:o,hostContainer:r,buttonBarContainer:n,disposables:t,renderDisposables:e}}renderElement(i,t,e,o){e.renderDisposables.clear(),e.renderDisposables.add({dispose:()=>{ve(e.buttonBarContainer)}}),e.hostContainer.innerText=Ve(this.labelService,i.workspace),e.element.classList.toggle("current-workspace",this.uriIdentityService.extUri.isEqual(i.workspace,i.profileElement.getCurrentWorkspace())),e.hostContainer.style.display="",e.buttonBarContainer.style.display="none"}disposeTemplate(i){i.disposables.dispose()}};A=P([I(0,Q),I(1,Be)],A);let M=class{constructor(i,t){this.uriIdentityService=i;this.hoverService=t;this.hoverDelegate=Ue("mouse")}static TEMPLATE_ID="path";templateId=M.TEMPLATE_ID;hoverDelegate;renderTemplate(i){const t=new g,e=i.appendChild(l(".path")),o=e.appendChild(l("div.path-label")),r=t.add(this.hoverService.setupManagedHover(this.hoverDelegate,o,"")),n=t.add(new g);return{element:e,pathLabel:o,pathHover:r,disposables:t,renderDisposables:n}}renderElement(i,t,e,o){e.renderDisposables.clear();const r=this.formatPath(i.workspace);e.pathLabel.innerText=r,e.element.classList.toggle("current-workspace",this.uriIdentityService.extUri.isEqual(i.workspace,i.profileElement.getCurrentWorkspace())),e.pathHover.update(r)}disposeTemplate(i){i.disposables.dispose(),i.renderDisposables.dispose()}formatPath(i){if(i.scheme===xt.file)return Re(i.fsPath);if(i.path.startsWith(At.sep)){const t=i.path.substring(1);if(Ft(t,!0))return Re(Mt.normalize(t),!0)}return i.path}};M=P([I(0,Q),I(1,Ae)],M);let R=class extends U{constructor(t,e){super("changeProfile","",S.asClassName(Wt));this.item=t;this.userDataProfilesService=e;this.tooltip=a("change profile","Change Profile")}getSwitchProfileActions(){return this.userDataProfilesService.profiles.filter(t=>!t.isTransient).sort((t,e)=>t.isDefault?-1:e.isDefault?1:t.name.localeCompare(e.name)).map(t=>({id:`switchProfileTo${t.id}`,label:t.name,class:void 0,enabled:!0,checked:t.id===this.item.profileElement.profile.id,tooltip:"",run:()=>{t.id!==this.item.profileElement.profile.id&&this.userDataProfilesService.updateProfile(t,{workspaces:[...t.workspaces??[],this.item.workspace]})}}))}};R=P([I(1,_)],R);let F=class{constructor(i,t,e,o){this.userDataProfilesService=i;this.userDataProfileManagementService=t;this.contextMenuService=e;this.uriIdentityService=o}static TEMPLATE_ID="actions";templateId=F.TEMPLATE_ID;renderTemplate(i){const t=new g,e=i.appendChild(l(".profile-workspaces-actions-container")),o=t.add(G());return{actionBar:t.add(new Ht(e,{hoverDelegate:o,actionViewItemProvider:n=>{if(n instanceof R)return new Nt(n,{getActions:()=>n.getSwitchProfileActions()},this.contextMenuService,{classNames:n.class,hoverDelegate:o})}})),disposables:t}}renderElement(i,t,e,o){e.actionBar.clear();const r=[];r.push(this.createOpenAction(i)),r.push(new R(i,this.userDataProfilesService)),r.push(this.createDeleteAction(i)),e.actionBar.push(r,{icon:!0})}createOpenAction(i){return{label:"",class:S.asClassName(K.window),enabled:!this.uriIdentityService.extUri.isEqual(i.workspace,i.profileElement.getCurrentWorkspace()),id:"openWorkspace",tooltip:a("open","Open in New Window"),run:()=>i.profileElement.openWorkspace(i.workspace)}}createDeleteAction(i){return{label:"",class:S.asClassName(Ut),enabled:this.userDataProfileManagementService.getDefaultProfileToUse().id!==i.profileElement.profile.id,id:"deleteTrustedUri",tooltip:a("deleteTrustedUri","Delete Path"),run:()=>i.profileElement.updateWorkspaces([],[i.workspace])}}disposeTemplate(i){i.disposables.dispose()}};F=P([I(0,_),I(1,Je),I(2,fe),I(3,Q)],F);function Ve(v,i){return i.authority?v.getHostLabel(i.scheme,i.authority):a("localAuthority","Local")}let H=class extends Ye{constructor(t){super();this.instantiationService=t;this.model=Dt.getInstance(this.instantiationService),this._register(this.model.onDidChange(e=>this.dirty=this.model.profiles.some(o=>o instanceof w)))}static ID="workbench.input.userDataProfiles";resource=void 0;model;_dirty=!1;get dirty(){return this._dirty}set dirty(t){this._dirty!==t&&(this._dirty=t,this._onDidChangeDirty.fire())}get typeId(){return H.ID}getName(){return a("userDataProfiles","Profiles")}getIcon(){return Ze}async resolve(){return await this.model.resolve(),this.model}isDirty(){return this.dirty}async save(){return await this.model.saveNewProfile(),this}async revert(){this.model.revert()}matches(t){return t instanceof H}dispose(){for(const t of this.model.profiles)t instanceof y&&t.reset();super.dispose()}};H=P([I(0,D)],H);class Fo{canSerialize(i){return!0}serialize(i){return""}deserialize(i){return i.createInstance(H)}}export{O as UserDataProfilesEditor,H as UserDataProfilesEditorInput,Fo as UserDataProfilesEditorInputSerializer,_t as profilesSashBorder};
