var y=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var s=(a,t,r,i)=>{for(var o=i>1?void 0:i?P(t,r):t,n=a.length-1,m;n>=0;n--)(m=a[n])&&(o=(i?m(t,r,o):m(o))||o);return i&&o&&y(t,r,o),o},e=(a,t)=>(r,i)=>t(r,i,a);import{generateUuid as h}from"../../../../base/common/uuid.js";import{IExtensionGalleryService as U}from"../../../../platform/extensionManagement/common/extensionManagement.js";import"../../../../base/common/uri.js";import{ExtensionManagementService as M}from"../common/extensionManagementService.js";import{InstantiationType as w,registerSingleton as b}from"../../../../platform/instantiation/common/extensions.js";import{IExtensionManagementServerService as k,IWorkbenchExtensionManagementService as L}from"../common/extensionManagement.js";import{Schemas as R}from"../../../../base/common/network.js";import{IConfigurationService as T}from"../../../../platform/configuration/common/configuration.js";import{IDownloadService as W}from"../../../../platform/download/common/download.js";import{IProductService as q}from"../../../../platform/product/common/productService.js";import{INativeWorkbenchEnvironmentService as C}from"../../environment/electron-sandbox/environmentService.js";import{joinPath as F}from"../../../../base/common/resources.js";import{IUserDataSyncEnablementService as G}from"../../../../platform/userDataSync/common/userDataSync.js";import{IDialogService as N}from"../../../../platform/dialogs/common/dialogs.js";import{IWorkspaceTrustRequestService as O}from"../../../../platform/workspace/common/workspaceTrust.js";import{IExtensionManifestPropertiesService as V}from"../../extensions/common/extensionManifestPropertiesService.js";import{IInstantiationService as X}from"../../../../platform/instantiation/common/instantiation.js";import{IFileService as j}from"../../../../platform/files/common/files.js";import{ILogService as B}from"../../../../platform/log/common/log.js";import{IUserDataProfileService as z}from"../../userDataProfile/common/userDataProfile.js";import{IExtensionsScannerService as A}from"../../../../platform/extensionManagement/common/extensionsScannerService.js";import{ITelemetryService as H}from"../../../../platform/telemetry/common/telemetry.js";import{IUserDataProfilesService as J}from"../../../../platform/userDataProfile/common/userDataProfile.js";let c=class extends M{constructor(r,i,o,n,m,S,v,I,l,p,f,d,E,g,u,x,D){super(i,o,n,m,S,v,I,l,p,f,d,E,g,u,x,D);this.environmentService=r}async installVSIXInServer(r,i,o){if(r.scheme===R.vscodeRemote&&i===this.extensionManagementServerService.localExtensionManagementServer){const n=F(this.environmentService.tmpDir,h());await this.downloadService.download(r,n),r=n}return super.installVSIXInServer(r,i,o)}};c=s([e(0,C),e(1,k),e(2,U),e(3,z),e(4,J),e(5,T),e(6,q),e(7,W),e(8,G),e(9,N),e(10,O),e(11,V),e(12,j),e(13,B),e(14,X),e(15,A),e(16,H)],c),b(L,c,w.Delayed);export{c as ExtensionManagementService};
